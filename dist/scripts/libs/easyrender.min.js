var EC={version:"1.2.0"};!function(t){"use strict";var e=Array.prototype.slice,i=Object.prototype.toString,n=Object.prototype.hasOwnProperty,s=Array.prototype,r=Function.prototype;!!Date.now||(Date.now=function(){return+new Date}),!!r.bind||(r.bind=function(){var t=this,e=[].shift.call(arguments),i=[].slice.call(arguments);return function(){return t.apply(e,[].concat.call(i,[].slice.call(arguments)))}}),!!s.find||(s.find=function(t){for(var e=0,i=this.length;e<i;e++)if(t&&t(this[e],e,this)===!0)return this[e]}),!!Array.isArray||(Array.isArray=function(t){return"[object Array]"===i.call(t)}),s.filter||(s.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=[],s=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)if(r in e){var h=e[r];t.call(s,h,r,e)&&n.push(h)}return n}),s.indexOf||(s.indexOf=function(t,e){var i;if(null===this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0===s)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),r>=s)return-1;for(i=Math.max(r>=0?r:s-Math.abs(r),0);i<s;){if(i in n&&n[i]===t)return i;i++}return-1}),s.indexOf||(s.indexOf=function(t){return this.indexOf(t)>-1}),"function"!=typeof Object.assign&&(Object.assign=function(t){for(var i,n,s=e.call(arguments,1),r=0;r<s.length;r++)for(n in i=s[r])i.hasOwnProperty(n)&&(t[n]=i[n]);return t}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(s){if("object"!=typeof s&&"function"!=typeof s||null===s)throw new TypeError("Object.keys called on non-object");var r=[];for(var h in s)t.call(s,h)&&r.push(h);if(e)for(var o=0;o<n;o++)t.call(s,i[o])&&r.push(i[o]);return r}}());var h,o,a=function(){function t(){}return function(e){if(null!==e&&"object"!=typeof e&&"function"!=typeof e)throw TypeError("Argument must be an object, or null");t.prototype=e;var i=new t;if(t.prototype=null,arguments.length>1){var s=Object(arguments[1]);for(var r in s)n.call(s,r)&&(i[r]=s[r])}return i}}(),u="ontouchstart"in document,c=navigator.userAgent,l=window.navigator.msPointerEnabled,d=l&&/IEMobile/i.test(c);"undefined"!=typeof document.hidden?(h="hidden",o="visibilitychange"):"undefined"!=typeof document.msHidden?(h="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h="webkitHidden",o="webkitvisibilitychange"),u=u||d||!1;var p=d?{START:"MSPointerDown",MOVE:"MSPointerMove",END:"MSPointerCancel",HIDDEN:h,VISIBILITYCHANGE:o}:{START:u?"touchstart":"mousedown",MOVE:u?"touchmove":"mousemove",END:u?"touchend":"mouseup",HIDDEN:h,VISIBILITYCHANGE:o};p.RESIZE="onorientationchange"in window?"orientationchange":"resize";var f=Object.assign;t.provide=function(e){if("object"==typeof e)return f(t,e),t},t.provide({isDefined:function(t){return"undefined"!=typeof t},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},isFunction:function(t){return"function"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isEmptyObject:function(e){if(!t.isObject(e))return!1;for(var i in e)return!1;return!0},isArray:Array.isArray,copy:function(t,e){return e?JSON.parse(JSON.stringify(t)):Array.isArray(t)?t.slice():f({},t)},camelize:function(t){return t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})},lowercase:function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},getStyle:function(e,i){return window.getComputedStyle(e,null)[t.camelize(i)]}});var g=function(t,e){var i,s=this;return i=t&&n.call(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},f(i,s,e),i.prototype=a(s.prototype,t),i.prototype.constructor=i,i.superclass=s.prototype,i};t.provide({extend:f,classExtend:g,ua:c,isTouch:u,noop:function(){},EVENTS:p})}(EC);var requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){return clearTimeout(t)};!function(t){"use strict";function e(t){try{return t.getBoundingClientRect()}catch(t){return{left:0,top:0}}}function i(t,i){if(u&&void 0!==i.layerX&&i.layerX!==i.offsetX)return{x:i.layerX,y:i.layerY};if(void 0!==i.offsetX)return{x:i.offsetX,y:i.offsetY};var n=e(t);return{x:i.clientX-n.left,y:i.clientY-n.top}}function n(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!==i?i[2]:null}function s(t,e){return t.getBounds().intersects(e.getBounds())}function r(t,e,i,n){i&&n||(i=.25,n=.25);var s,r,h,o,a;return e<1?(s=t[0][0]+(t[1][0]-t[0][0])*i,r=t[0][1]+(t[1][1]-t[0][1])*i):(s=t[e][0]+(t[e+1][0]-t[e-1][0])*i,r=t[e][1]+(t[e+1][1]-t[e-1][1])*i),e>t.length-3?(a=t.length-1,h=t[a][0]-(t[a][0]-t[a-1][0])*n,o=t[a][1]-(t[a][1]-t[a-1][1])*n):(h=t[e+1][0]-(t[e+2][0]-t[e][0])*n,o=t[e+1][1]-(t[e+2][1]-t[e][1])*n),{a:{x:s,y:r},b:{x:h,y:o}}}var h=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,o={};o.toHex=function(t){if(/^(rgb|RGB)/.test(t)){for(var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),i="#",n=0;n<e.length;n++){var s=Number(e[n]).toString(16);"0"===s&&(s+=s),i+=s}return 7!==i.length&&(i=t),i}if(!h.test(t))return t;var r=t.replace(/#/,"").split("");if(6===r.length)return t;if(3===r.length){for(var o="#",n=0;n<r.length;n+=1)o+=r[n]+r[n];return o}},o.toRgb=function(t,e){var i=t.toLowerCase();if(i&&h.test(i)){var n="rgb";if(4===i.length){for(var s="#",r=1;r<4;r+=1)s+=i.slice(r,r+1).concat(i.slice(r,r+1));i=s}for(var o=[],r=1;r<7;r+=2)o.push(parseInt("0x"+i.slice(r,r+2)));return"number"==typeof e&&(o.push(e),n="rgba"),n+"("+o.join(",")+")"}return i};var a={};a.toInt=function(t){return.5+t|0};var u=/Firefox\/([\d.]+)/.test(navigator.userAgent);t.Util=t.Util||{},t.extend(t.Util,{color:o,number:a,getBounding:i,getParameter:n,hitTest:s,getCtrlPoint:r})}(window.EC),function(t){"use strict";var e=Array.prototype.slice,i=function(){this.initialize.apply(this,arguments)};t.extend(i.prototype,{initialize:function(){return this.$e={},this},on:function(t,e,i){var n=this.$e;return(n[t]||(n[t]=[])).push({fn:e,ctx:i||this}),this},once:function(t,e,i){function n(){s.off(t,n),e.apply(this,arguments)}var s=this;return n._=e,this.on(t,n,i)},has:function(t,e){var i=this.$e[t];if(void 0!==i){if(!e)return!0;for(var n=0;n<i.length;n++)if(i[n].fn===e&&i[n].fn._===e)return!0}return!1},off:function(t,e){var i=this.$e,n=i[t],s=[];return n&&e&&(s=n.filter(function(t){return t.fn!==e&&t.fn._!==e})),s.length?i[t]=s:delete i[t],this},dispatch:function(t){var i=e.call(arguments,1),n=(this.$e[t]||[]).slice();return n.length&&n.forEach(function(t){t.fn.apply(t.ctx,i)}),this},success:function(t){return this.on("success",t)},complete:function(t){return this.on("complete",t)},error:function(t){return this.on("error",t)},progress:function(t){return this.on("progress",t)},clear:function(){return this.$e={},this}}),i.extend=t.classExtend,t.provide({Event:i})}(window.EC),function(t){"use strict";var e=function(){this._items={}};e.prototype={getAll:function(){return Object.keys(this._items).map(function(t){return this._items[t]}.bind(this))},add:function(t){this._items[t.getId()]=t},get:function(t){return this._items[t]},remove:function(t){delete this._items[t.getId()]},removeAll:function(){this._items={}},update:function(t){var e,i=this._items;for(var n in i)e=i[n],e&&e.update()===!1&&(e._isPlaying=!1,t||delete i[n]);return!0},nextId:function(){return e._nextId++}},e._nextId=0,t.provide({groupManager:new e})}(window.EC),function(t){"use strict";function e(t){EC.extend(f,t||{})}function i(t,e,i){var n=null;if(!e)var s=Date.now()+1e18*Math.random();if("object"==typeof t)if(i){n=[],e||(t._=s);for(var r in t)n.push(r+"="+t[r]);n=n.join("&")}else n=JSON.stringify(t);else"string"==typeof t&&(n=t,e||(n+="&_="+s));return n}function n(t,e,i){return function(){return i&&t.apply(this,arguments),e.apply(this,arguments)}}function s(t){function e(e){o&&clearTimeout(o);var i;i=/^(?:arraybuffer|blob|json)$/.test(t.responseType)?h.response:"jsonp"===a?e:"xml"===a?h.responseXML:"json"===a?JSON.parse(h.responseText):h.responseText,n(f.success,t.success,t.global).call(t.context,i,h),n(f.complete,t.complete,t.global).call(t.context,h,h.status,h.statusText)}function s(){o&&clearTimeout(o),n(f.error,t.error,t.global).call(t.context,h,h.status,h.statusText),n(f.complete,t.complete,t.global).call(t.context,h,h.status,h.statusText)}function r(e){n(f.progress,t.progress,t.global).call(t.context,e,h,h.status,h.statusText)}t=EC.extend({},f,t||{});var h=t.xhr();if(h){var o,a=t.dataType.toLowerCase(),u=t.method.toUpperCase(),c=t.url,l=i(t.data,t.cache,t.processData);if(n(f.beforeSend,t.beforeSend,t.global).call(t.context,h)===!1)return h.abort(),s(),h;if(t.async&&t.timeout>0&&(o=setTimeout(function(){h.readyState<4&&(h.abort(),s())},t.timeout)),"GET"===u&&l&&(c+=c.indexOf("?")>-1?"&"+l:"?"+l,l=null),"jsonp"===a)return c+=(c.indexOf("?")>-1?"&":"?")+"callback="+t.callbackName,d(c,e,s),h;if("onload"in h?(h.addEventListener("load",function t(){h.removeEventListener("load",t,!1),(h.status>=200&&h.status<300||304===h.status)&&e()},!1),h.addEventListener("error",function t(){h.removeEventListener("error",t,!1),s()},!1)):h.onreadystatechange=function(){4===h.readyState&&(h.status>=200&&h.status<300||304===h.status?(h.onreadystatechange=new Function,e()):s())},"progress"in h&&(f.progress||t.progress)){var p=function(){h.removeEventListener("progress",r,!1),h.upload.removeEventListener("progress",r,!1),h.removeEventListener("loadend",p,!1),h.upload.removeEventListener("loadend",p,!1)};h.addEventListener("progress",r,!1),h.upload.addEventListener("progress",r,!1),h.addEventListener("loadend",p,!1),h.upload.addEventListener("loadend",p,!1)}h.open(u,c,t.async),t.cors&&(t.xhrFields.withCredentials=!0);for(var g in t.xhrFields)h[g]=t.xhrFields[g];t.headers["Content-Type"]=t.contentType;for(var m in t.headers)h.setRequestHeader(m,t.headers[m]);return h.setRequestHeader("Accept",t.accepts[a]?t.accepts[a]+", */*; q=0.01":t.accepts._default),h.send(l),h}}var r=/^https?:\/\//,h={},o=function(t,e,i){var n=new Image;n.addEventListener("load",function t(){EC.isFunction(e)&&e(n),this.removeEventListener("load",t,!1)},!1),n.addEventListener("error",function e(){var n="fail load:"+t;console.error(n),EC.isFunction(i)&&i(n),this.removeEventListener("error",e,!1)},!1),n.src=t},a=EC.Event.extend({initialize:function(t){var e=this;return a.superclass.initialize.call(this),o(t,function(t){e.dispatch("success",t)},function(t){e.dispatch("error",t)}),this}}),u=function(e,i){var n=r.test(e.url)?e.url:t.baseUrl+e.url;o(n,function(t){h[e.name]={width:t.width,height:t.height,texture:t},EC.extend(h[e.name],e),EC.isFunction(i)&&i(e)})},c=function(t,e,i){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.src=t,s.onload=s.onreadystatechange=function(){s.onload=s.onreadystatechange=new Function,this.readyState&&!/loaded|complete/.test(this.readyState)||(s.parentNode.removeChild(s),"function"==typeof e&&e(s))},s.onerror=function(){s.onerror=new Function,"function"==typeof i&&i(null,404,"not found")},n.insertBefore(s,n.firstChild)},l=EC.Event.extend({initialize:function(t){var e=this;return l.superclass.initialize.call(this),c(t,function(t){e.dispatch("success",t)},function(t){e.dispatch("error",t)}),this}}),d=function(t,e,i){var n=/callback=([^&]+)/.exec(t);return n?(n=n[1],"?"===n&&(n="jsonp"+(Date.now()+1e18*Math.random()),t=t.replace("callback=?","callback="+n)),window[n]=function(t){e(t),delete window[n]},void c(t,null,i)):c(t,null,i)},p=EC.Event.extend({initialize:function(t){var e=this;return p.superclass.initialize.call(this),d(t,function(t){e.dispatch("success",t)},function(t){e.dispatch("error",t)}),this}}),f={url:"",method:"GET",async:!0,data:{},headers:{},xhrFields:{},cache:!0,cors:!1,global:!0,processData:!0,beforeSend:EC.noop,success:EC.noop,error:EC.noop,complete:EC.noop,progress:null,timeout:0,context:null,dataType:"json",responseType:null,callbackName:"?",contentType:"application/x-www-form-urlencoded;charset=UTF-8",xhr:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHttp")}catch(t){return null}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},g=document.createElement("a");g.href=window.location.href;var m=EC.Event.extend({initialize:function(t){var e=this;m.superclass.initialize.call(this);var i=t.success,n=t.error,r=t.complete;return t.success=function(){var t=[].slice.call(arguments);i&&i.apply(e,t),e.dispatch.apply(e,["success"].concat(t))},t.error=function(){var t=[].slice.call(arguments);n&&n.apply(e,t),e.dispatch.apply(e,["error"].concat(t))},t.complete=function(){var t=[].slice.call(arguments);r&&r.apply(e,t),e.dispatch.apply(e,["complete"].concat(t))},s(t),this},then:function(t,e){return t&&this.on("success",t),e&&this.on("error",e),this},catch:function(t){return t&&this.on("error",t),this},always:function(t){return t&&this.on("complete",t),this}}),v=function(e,i,n){return e=r.test(e)?e:t.baseUrl+e,s({url:e,dataType:"json",success:i,error:function(){n.apply(null,arguments),console.error("fail load:"+e)}})},y=function(t,e){"object"==typeof t&&("image"===t.type?u(t,function(){e&&e(t)}):/^(?:json|sheet|font)$/.test(t.type)?v(t.url,function(i){var n=EC.extend({},t,{data:i});if(h[t.name]=n,"sheet"===t.type||"font"===t.type){var s=t.url.substr(0,t.url.lastIndexOf("/")+1)+i.file,r=i.file.replace(/\.(\w+)$/,"_$1"),o=EC.extend({},t,{url:s,name:r,type:"image"});u(o,function(){e&&e(n)})}else e&&e(n)}):(h[t.name]=t,e&&e(t)))},x=function(){return h},w=function(t,e){var i=/\[(\d+\-\d+)\]/,n=i.exec(t);if(n){for(var s=[],r=RegExp.$1.split("-"),o=t.replace(i,"").split("_"),a=Number(r[0]);a<Number(r[1])+1;a++){var u=o[0]+a+"_"+o[1];s.push(h[u])}return s}var c=h[t];if(void 0===c)return console.error(t+" does not exist!");if("json"===c.type||"sheet"===c.type){if(e){var l={},d=c.data.frames[e];return l.width=d.w,l.height=d.h,l.sx=d.x,l.sy=d.y,l.swidth=d.w,l.sheight=d.h,l.texture=c.texture,l}return c.data}return c},_=function(t){var e=w(t);return e?e.texture:null},b=function(t,e){if("string"!=typeof t)return t;if(!/^(#|\.)/.test(t))return null;var i=t.charAt(0);if(e=e||document,"#"===i)return document.getElementById(t.substr(1,t.length));if(document.querySelectorAll)return e.querySelectorAll(t);try{return e.getElementsByClassName(t)}catch(i){var n=[],s=e.getElementsByTagName("*");return s.forEach(function(e){(" "+e.className+" ").indexOf(" "+t+" ")>-1&&n.push(e)}),n}},T=function(t,e){var i=e.groups.find(function(e){return e.name===t});if(void 0===i)return console.error('group "'+t+'" dose not exsit!');var n=i.keys.split(",").map(function(t){return t.trim()});return n},E=function(t,e){var i=[];return t.forEach(function(t){e.indexOf(t.name)>-1&&i.push(t)}),i},S=EC.Event.extend({initialize:function(t,e){var i=T(t,e);if(void 0!==i){var n=E(e.resources,i),s=this,r=0,h=n.length;return S.superclass.initialize.call(this),n.forEach(function(t){y(t,function(){s.dispatch("progress",++r,h,t),r>h-1&&s.dispatch("complete")})}),this}}});EC.extend(t,{loadImage:function(t){return new a(t)},ajaxSetup:e,ajax:function(t){return s(t)},request:function(t){return new m(t)},loadScript:function(t){return new l(t)},loadJson:function(t){return new m({url:t,dataType:"json"})},loadJsonp:function(t){return new p(t)},loadGroup:function(t,e){return new S(t,e)},getAsset:x,getRes:w,getTexture:_,el:b,baseUrl:"images/"}),["get","post"].forEach(function(e){t.request[e]=function(t,i,n){return new m(EC.extend({url:t,method:e,data:i},n||{}))}})}(window.RES||(window.RES={})),function(t){"use strict";var e={poolDic:Symbol("poolDic")},i=function(){this[e.poolDic]={}};i.prototype.getPoolBySign=function(t){return this[e.poolDic][t]||(this[e.poolDic][t]=[])},i.prototype.getItemByClass=function(t,e){var i=this.getPoolBySign(t),n=i.length?i.shift():new e;return n},i.prototype.recover=function(t,e){this.getPoolBySign(t).push(e)},i.prototype.clear=function(t){this.getPoolBySign(t).length=0},t.provide({Pool:i})}(window.EC),function(t){"use strict";var e=t.Event.extend({initialize:function(t){e.superclass.initialize.call(this),t=t||{},this.useInterval=t.useInterval||!1,this._ticker=null,this._frameRate=t.frameRate||60,this._frameRate<60&&(this.useInterval=!0)},start:function(){var t=this;return this.useInterval?(t.dispatch("ticker"),t._ticker=setInterval(function(){t.dispatch("ticker",Date.now())},1e3/t._frameRate)):+function e(){t._ticker=requestAnimationFrame(e),t.dispatch("ticker",Date.now())}(),this},stop:function(){return this._ticker&&(this.useInterval?clearInterval(this._ticker):cancelAnimationFrame(this._ticker),delete this._ticker,this.dispatch("stop",Date.now())),this}});t.provide({Ticker:e})}(window.EC),function(t){"use strict";var e=t.Event.extend({initialize:function(i,n){e.superclass.initialize.call(this),this._currentCount=0,this._startTime=0,this._repeatCount=n,this._waitTime=0,this._isTimeoutSet=!1,this._isPlaying=!1,this._id=t.groupManager.nextId(),this.delay=i},getId:function(){return this._id},start:function(){return t.groupManager.add(this),this._startTime=Date.now(),this._isPlaying=!0,this.dispatch("start"),this},isPlaying:function(){return this._isPlaying},stop:function(){return this._isPlaying?(this._waitTime>0?this._timeout(function(){this._isPlaying=!1,t.groupManager.remove(this),this.dispatch("complete"),this.reset()},this._waitTime):(this._isPlaying=!1,t.groupManager.remove(this),this.dispatch("complete"),this.reset()),this):this},wait:function(t){return this._waitTime=t,this},pause:function(t){return this._isPlaying=!1,this.dispatch("pause"),"number"==typeof t&&t>0&&this._timeout(function(){this._isPlaying=!0},t),this},setRepeatCount:function(t){return this._repeatCount=t,this},update:function(t){var e=t||Date.now(),i=e-this._startTime;if(this._waitTime>0)return i>=this._waitTime&&(this._timeup=!0),!0;if(!this._isPlaying)return!0;if(i>=this.delay){if(this._repeatCount&&++this._currentCount===this._repeatCount)return this.stop(),!1;this._startTime=e,this.dispatch("timer",e)}return!0},reset:function(){return this._currentCount=0,this},_timeout:function(t,e){var i=this;i._isTimeoutSet||(i._startTime=Date.now(),i._waitTime=e,i._isTimeoutSet=!0,Object.prototype.hasOwnProperty.call(i,"_timeup")||Object.defineProperty(i,"_timeup",{set:function(e){e===!0&&(i._waitTime=0,i._isTimeoutSet=!1,t.call(i))}}))}});t.provide({Timer:e})}(window.EC),function(t){"use strict";var e={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-e.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*e.Bounce.In(2*t):.5*e.Bounce.Out(2*t-1)+.5}}};t.provide({Easing:e})}(window.EC),function(t,e){"use strict";var i=function(){this._queues={}};i.prototype={add:function(t,i){var n=t.getId();this._queues[n]===e&&(this._queues[n]=[]),this._queues[n].push(i)},get:function(t){return this._queues[t.getId()]||[]},remove:function(t){delete this._queues[t.getId()]},removeAll:function(){this._queues={}}};var n=t.isFunction,s=t.isNumber,r=t.isEmptyObject,h=new i,o=function(t,e){return n(t)&&e?t.bind(e):t},a=function(e,i){this._cfg=i||{},this._tweenObj=e,this._startCallback=null,this._updateCallback=null,this._completeCallback=null,this._stopCallback=null,this._duration=1e3,this._startAttrs={},this._endAttrs={},this._startTime=null,this._easingFunction=t.Easing.Linear.None,this._repeatIndex=0,this._repeatCount=0,this._startCallbackFired=!1,this._isPlaying=!1,this._tweenTimeline=[],this._shouldTimelineAdd=!0,this._isFirstTimeline=!0,this._isReverse=!1,this._waitTime=0,this._id=t.groupManager.nextId(),this._cfg.reverse===!0&&(this._repeatCount=2),s(this._cfg.loop)&&(this._repeatCount=this._cfg.loop),s(this._cfg.yoyo)&&(this._repeatCount=2*this._cfg.yoyo),this._cfg.loop!==!0&&this._cfg.yoyo!==!0||(this._repeatCount=-1),setTimeout(this.start.bind(this))};a.get=function(t,e){return new a(t,e)},a.removeTweens=function(i){return t.isObject(i)&&i._tweenId!==e&&a.get(i).stop(),this},a.removeAllTweens=function(e){if(!(e instanceof t.DisplayObjectContainer))return this;var i=function(t){t.children.forEach(function(t){a.removeTweens(t),t.children.length>0&&i(t)})};return i(e),this},a.prototype={getId:function(){return this._id},start:function(){return this._isPlaying||this._tweenObj._tweenId!==e?this:(t.groupManager.add(this),this._tweenObj._tweenId=this.getId(),this._isPlaying=!0,this._startCallbackFired=!1,this)},stop:function(){var e=t.groupManager.get(this._tweenObj._tweenId);return e&&e._stopTween(),this},_stopTween:function(){return this._isPlaying?(t.groupManager.remove(this),h.remove(this),this._clearTimeline(),delete this._tweenObj._tweenId,this._isPlaying=!1,this._shouldTimelineAdd=!0,this._isFirstTimeline=!0,this._triggerStop(),this):this},isPlaying:function(){return this._isPlaying},_setProperty:function(i,n,s){this._startTime=Date.now(),this._duration=n||1e3,this._easingFunction=s||t.Easing.Linear.None,this._startAttrs={},this._endAttrs=i||{};for(var r in this._endAttrs)this._tweenObj[r]!==e&&(this._startAttrs[r]=Number(this._tweenObj[r]))},_getStartAttrs:function(t){if(!r(this._startAttrs))return this._startAttrs;var i={};for(var n in t)this._tweenObj[n]!==e&&(i[n]=Number(this._tweenObj[n]));return i},_addTimeline:function(t){this._shouldTimelineAdd&&(this._isFirstTimeline&&!s(t)&&(this._tweenTimeline.unshift([this._getStartAttrs(t[0]),t[1],t[2]]),this._isFirstTimeline=!1),this._tweenTimeline.push(t))},_clearTimeline:function(){this._tweenTimeline=[]},_timeout:function(t,e){var i=this;i._startTime=Date.now(),i._waitTime=e,Object.prototype.hasOwnProperty.call(i,"_timeup")||Object.defineProperty(i,"_timeup",{set:function(e){e===!0&&(i._waitTime=0,i._startTime=0,t())}})},to:function(t,e,i){return this.queue(this._setProperty.bind(this,t,e,i)),this._addTimeline([t,e,i]),this},wait:function(t){return s(t)&&(this.queue(t),this._addTimeline(t)),this},update:function(t){var i,n,r,o=(t||Date.now())-this._startTime;if(this._waitTime>0)return o>=this._waitTime&&(this._timeup=!0),!0;this._triggerStart(),i=o/this._duration,i=i>=1?1:i,n=this._tweenObj,r=this._easingFunction(i);for(var a in this._endAttrs){var u=this._startAttrs[a],c=this._endAttrs[a];if("string"==typeof c&&(c="+"===c.charAt(0)||"-"===c.charAt(0)?u+parseFloat(c):parseFloat(c)),"number"==typeof c){if(u===c)continue;n[a]=u+(c-u)*r}}if(this._triggerUpdate(i),1===i){this.dequeue();var l=h.get(this);if(l.length)return!0;if(this._triggerComplete(),this._repeatCount===-1||++this._repeatIndex<this._repeatCount){if(this._shouldTimelineAdd=!1,this._cfg.yoyo||this._cfg.reverse){var d;this._isReverse=!this._isReverse,this._tweenTimeline.reverse().forEach(function(t,i,n){if(this._isReverse){if(d=n[i+1],d===e)return!1}else{if(0===i)return!1;d=t}if(s(d))this.wait(d);else{var r,h;if(s(t)){if(0===i)return!1;r=n[i-1][1],h=n[i-1][2]}else r=t[1],h=t[2];this.to(d[0],r,h)}}.bind(this))}else this._cfg.loop&&this._tweenTimeline.forEach(function(t,e){if(0===e)for(var e in t[0])this._tweenObj[e]=t[0][e];else s(t)?this.wait(t):this.to.apply(this,t)}.bind(this));return!0}return this.stop(),!1}return!0},onStart:function(t,e){return this._startCallback=o(t,e),this},onUpdate:function(t,e){return this._updateCallback=o(t,e),this},onStop:function(t,e){return this._stopCallback=o(t,e),this},call:function(t,e){return this._completeCallback=o(t,e),this},_triggerStart:function(){this._startCallbackFired||(n(this._startCallback)&&this._startCallback(this._tweenObj),this._startCallbackFired=!0)},_triggerUpdate:function(t){n(this._updateCallback)&&this._updateCallback(this._tweenObj,t)},_triggerComplete:function(){n(this._completeCallback)&&this._completeCallback(this._tweenObj)},_triggerStop:function(){n(this._stopCallback)&&this._stopCallback(this._tweenObj)},queue:function(t){t&&h.add(this,t);var e=h.get(this);return"running"!==e[0]&&this.dequeue(),this},dequeue:function(){var t=this,e=h.get(this),i=e.shift();return"running"===i&&(i=e.shift()),i&&(e.unshift("running"),s(i)?t._timeout(function(){t.dequeue()},i):n(i)&&i.call(t)),this}},t.provide({Tween:a})}(window.EC),function(t,e){"use strict";function i(){return!0}function n(){return!1}var s=t.EVENTS,r=t.isTouch,h=function(){this.enableStack=[],this._touchX=0,this._touchY=0,this._lastObject=null,this._touchTimer=null};h.prototype={attach:function(t){this.stage=t,this.element=t.canvas,this._startTime=0,this._bindEvents()},_bindEvents:function(){this.element.addEventListener(s.START,this._onTouchStart.bind(this),!1),this.element.addEventListener(s.MOVE,this._onTouchMove.bind(this),!1),this.element.addEventListener(s.END,this._onTouchEnd.bind(this),!1),this.element.addEventListener("mouseout",this._onMouseOut.bind(this),!1)},_onTouchStart:function(t){t=r?t.targetTouches[0]:t,this._startTime=Date.now(),this._clearTouchTimer(),this._setTouchXY(t),this.enableStack=this._getTouchEnables(),this._triggerEvent("touchstart",t),this._touchTimer=setTimeout(function(){this._triggerEvent("longtouch",t)}.bind(this),350)},_onTouchMove:function(e){e.preventDefault(),e=r?e.changedTouches[0]:e,this._clearTouchTimer(),t.isTouch||(this.enableStack=this._getTouchEnables()),this._setTouchXY(e),this._triggerEvent("touchmove",e)},_onTouchEnd:function(t){t=r?t.changedTouches[0]:t,this._clearTouchTimer(),this._setTouchXY(t),this._triggerEvent("touchend",t);var e=Date.now()-this._startTime;e<200&&this._triggerEvent("touch",t),this._resetTouch()},_onMouseOut:function(){this._clearTouchTimer(),this._resetTouch(),this._triggerLastStack()},_clearTouchTimer:function(){this._touchTimer&&clearTimeout(this._touchTimer)},_resetTouch:function(){this._lastObject=null},_triggerEvent:function(e,i){var n=this,s=this.stage.scaleRatio,r=!t.isTouch&&"touchmove"===e,h=this.enableStack.find(function(e){return t.isPointInPath({x:n._touchX*s,y:n._touchY*s},e)});if(r&&this._lastObject!==h&&this._triggerLastStack(),h){var a=t.extend({type:e,stageX:this._touchX*s,stageY:this._touchY*s,scaleRatio:s},this._getOriginalEventProps(i));i=new o(i,a);for(var u=h;u&&!i.isPropagationStopped();)"Sprite"===u.$renderType?u.touchEnabled&&u.dispatch(e,t.extend(i,{target:this._getTouchedTarget(u)||u})):u.dispatch(e,t.extend(i,{target:u})),r&&u.touchEnabled&&!u._touchentered&&this._lastObject!==u&&(u.dispatch("touchenter",t.extend(i,{type:"touchenter",target:u})),u.cursor&&(this.element.style.cursor=u.cursor),u._touchentered=!0),u=u.parent}this._lastObject=h},_triggerLastStack:function(){var t=this._lastObject;for(t&&(t.dispatch("touchout",{type:"touchout",target:t}),this.element.style.cursor="",this._lastObject=null);t;)delete t._touchentered,t=t.parent},_getTouchedTarget:function(e){function i(t){for(var e=t.getChilds(),s=e.length;s--;)e[s].visible&&("Sprite"===e[s].$renderType?i(e[s]):n.push(e[s]))}var n=[],s=this,r=this.stage.scaleRatio;return i(e),n.find(function(e){return t.isPointInPath({x:s._touchX*r,y:s._touchY*r},e)})},_getTouchEnables:function(){function t(i){for(var n=i.getChilds(),s=n.length;s--;)n[s].visible&&("Sprite"===n[s].$renderType&&t(n[s]),n[s].touchEnabled&&e.push(n[s]))}var e=[];return t(this.stage),this.stage.touchEnabled&&e.push(this.stage),e},_getOriginalEventProps:function(t){var e={};return["pageX","pageY","clientX","clientY","screenX","screenY","radiusX","radiusY","rotationAngle"].forEach(function(i){e[i]=t[i]}),e},_setTouchXY:function(e){var i=t.Util.getBounding(this.element,e);this._touchX=i.x,this._touchY=i.y}};var o=function(s,r){s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===e&&s.returnValue===!1?i:n,this.target=s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,r&&t.extend(this,r),this.timeStamp=s&&s.timeStamp||Date.now()};o.prototype={constructor:o,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=i,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=i,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=i,t&&t.stopImmediatePropagation(),this.stopPropagation()}},t.provide({TouchEvent:h})}(window.EC),function(t,e){"use strict";function i(t){return Math.sqrt(1-Math.pow(t-1,2))}function n(t){return 1-Math.sqrt(1-t*t)}function s(t){return t.changedTouches?t.changedTouches[0]:t}function r(){}var h=function(i){if(this.element=i.touch,this.target=this._getValue(i.target,this.element),this.vertical=this._getValue(i.vertical,!0),this.property=i.property,this.initialValue=this._getValue(i.initialValue,this.target[this.property]),this.target[this.property]=this.initialValue,this.fixed=this._getValue(i.fixed,!1),this.sensitivity=this._getValue(i.sensitivity,1),this.moveFactor=this._getValue(i.moveFactor,1),this.factor=this._getValue(i.factor,1),this.outFactor=this._getValue(i.outFactor,.3),this.min=i.min,this.max=i.max,this.deceleration=6e-4,this.maxRegion=this._getValue(i.maxRegion,600),this.springMaxRegion=this._getValue(i.springMaxRegion,60),this.maxSpeed=i.maxSpeed,this.hasMaxSpeed=!(this.maxSpeed===e),this.lockDirection=this._getValue(i.lockDirection,!0),this.scaleRatio=1,this.scroll=i.scroll||r,this.touchEnd=i.touchEnd||r,this.touchStart=i.touchStart||r,this.touchMove=i.touchMove||r,this.reboundEnd=i.reboundEnd||r,this.animationEnd=i.animationEnd||r,this.correctionEnd=i.correctionEnd||r,this.tap=i.tap||r,this.pressMove=i.pressMove||r,this.eventTarget=window,this.hasMin=!(this.min===e),this.hasMax=!(this.max===e),this.hasMin&&this.hasMax&&this.min>this.max)throw"the min value can't be greater than the max value.";this.isTouchStart=!1,
this.step=i.step,this.inertia=this._getValue(i.inertia,!0),this._calculateIndex(),this.element.touchEnabled=!0,this.element.on("touchstart",this._start,this),this.eventTarget.addEventListener(t.EVENTS.END,this._end.bind(this),!1),this.eventTarget.addEventListener(t.EVENTS.MOVE,this._move.bind(this),{passive:!1,capture:!1}),this.x1=this.x2=this.y1=this.y2=null};h.prototype={_getValue:function(t,i){return t===e?i:t},stop:function(){this._stopTweens(),this._calculateIndex()},_start:function(t){this.isTouchStart=!0,this.touchStart.call(this,t,this.target[this.property]),this._stopTweens(),this._calculateIndex(),this.startTime=Date.now(),this.scaleRatio=t.scaleRatio,this.x1=this.preX=t.stageX,this.y1=this.preY=t.stageY,this.start=this.vertical?this.preY:this.preX,this._firstTouchMove=!0,this._preventMove=!1},_move:function(e){if(this.isTouchStart){e=s(e);var i=t.Util.getBounding(this.element.stage.canvas,e),n=i.x*this.scaleRatio,r=i.y*this.scaleRatio;if(this._firstTouchMove&&this.lockDirection){var h=Math.abs(n-this.x1)-Math.abs(r-this.y1);h>0&&this.vertical?this._preventMove=!0:h<0&&!this.vertical&&(this._preventMove=!0),this._firstTouchMove=!1}if(!this._preventMove){var o=(this.vertical?r-this.preY:n-this.preX)*this.sensitivity,a=this.moveFactor;this.hasMax&&this.target[this.property]>this.max&&o>0?a=this.outFactor:this.hasMin&&this.target[this.property]<this.min&&o<0&&(a=this.outFactor),o*=a,this.preX=n,this.preY=r,this.fixed||(this.target[this.property]+=o),this.scroll.call(this,this.target[this.property]);var u=Date.now();u-this.startTime>300&&(this.startTime=u,this.start=this.vertical?this.preY:this.preX),this.touchMove.call(this,e,this.target[this.property])}null!==this.x2?(e.deltaX=n-this.x2,e.deltaY=r-this.y2):(e.deltaX=0,e.deltaY=0),this.pressMove.call(this,e,this.target[this.property]),this.x2=n,this.y2=r}},scrollTo:function(t,e,n){this._to(t,this._getValue(e,600),n||i,this.scroll,function(t){this._calculateIndex(),this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this))},_calculateIndex:function(){this.hasMax&&this.hasMin&&(this.currentPage=Math.round((this.max-this.target[this.property])/this.step))},_end:function(e){if(this.isTouchStart){this.isTouchStart=!1,e=s(e);var r=this,h=this.target[this.property],o=t.Util.getBounding(this.element.stage.canvas,e),a=o.x*this.scaleRatio,u=o.y*this.scaleRatio,c=Math.abs(a-this.x1)<30&&Math.abs(u-this.y1)<30;if(c&&this.tap.call(this,e,h),this.touchEnd.call(this,e,h,this.currentPage)===!1)return;if(this.hasMax&&h>this.max)this._to(this.max,200,i,this.scroll,function(t){this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this));else if(this.hasMin&&h<this.min)this._to(this.min,200,i,this.scroll,function(t){this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this));else if(!this.inertia||c||this._preventMove)r._correction();else{var l=Date.now()-this.startTime;if(l<300){var d=((this.vertical?u:a)-this.start)*this.sensitivity,p=Math.abs(d)/l,f=this.factor*p;this.hasMaxSpeed&&f>this.maxSpeed&&(f=this.maxSpeed);var g=h+f*f/(2*this.deceleration)*(d<0?-1:1),m=1;g<this.min?g<this.min-this.maxRegion?(m=n((h-this.min+this.springMaxRegion)/(h-g)),g=this.min-this.springMaxRegion):(m=n((h-this.min+this.springMaxRegion*(this.min-g)/this.maxRegion)/(h-g)),g=this.min-this.springMaxRegion*(this.min-g)/this.maxRegion):g>this.max&&(g>this.max+this.maxRegion?(m=n((this.max+this.springMaxRegion-h)/(g-h)),g=this.max+this.springMaxRegion):(m=n((this.max+this.springMaxRegion*(g-this.max)/this.maxRegion-h)/(g-h)),g=this.max+this.springMaxRegion*(g-this.max)/this.maxRegion));var v=Math.round(p/r.deceleration)*m;r._to(Math.round(g),v,i,r.scroll,function(t){r.hasMax&&r.target[r.property]>r.max?r._to(r.max,600,i,r.scroll,r.animationEnd):r.hasMin&&r.target[r.property]<r.min?r._to(r.min,600,i,r.scroll,r.animationEnd):r.step?r._correction():r.animationEnd.call(r,t),r.scroll.call(this,t)})}else r._correction()}}this.x1=this.x2=this.y1=this.y2=null},_to:function(e,i,n,s,r){if(!this.fixed){var h=this,o=this.property,a={};a[o]=e,t.Tween.get(h.target).to(a,i,n).onUpdate(function(t){s&&s.call(h,t[o])}).call(function(){r&&r.call(h,e)})}},_stopTweens:function(){t.Tween.removeTweens(this.target)},_correction:function(){if(this.step!==e){var t=this.target,n=this.property,s=t[n],r=Math.floor(Math.abs(s/this.step)),h=s%this.step;Math.abs(h)>this.step/2?this._to((s<0?-1:1)*(r+1)*this.step,400,i,this.scroll,function(t){this._calculateIndex(),this.correctionEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this)):this._to((s<0?-1:1)*r*this.step,400,i,this.scroll,function(t){this._calculateIndex(),this.correctionEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this))}}},t.provide({TouchScroll:h})}(window.EC),function(t,e){"use strict";function i(t,i){i.texture&&(i.sx!==e?t.drawImage(i.texture,i.sx,i.sy,i.swidth,i.sheight,0,0,i.width,i.height):t.drawImage(i.texture,0,0,i.width,i.height))}function n(t){var e,i,n=t.$fontData.frames,s=t.$fontTexture,r=t.$textwrap,h=0,o=0;r.children.length=0,t.$textArr.forEach(function(a){i=n[a],e=(new D).setParams({texture:s,width:i.w,height:i.h,sx:i.x,sy:i.y,x:h+=o+t.letterSpacing,swidth:i.w,sheight:i.h}),o=i.w,r.addChild(e)}),"center"===t.textAlign?r.x=(t.width-r.width)/2:"right"===t.textAlign&&(r.x=t.width-r.width)}function s(t,e){n(e),t.save(),t.translate(e.$textwrap.x,e.$textwrap.y),e.$textwrap.each(function(e){t.save(),t.translate(e.x,e.y),i(t,e),t.restore()}),t.restore()}function r(t,e){t.beginPath(),o(t,e),e.draw(t)}function h(t,e){var i=e.parent||{},n=e.moveX*(e.anchorX>0?1:0),s=e.moveY*(e.anchorY>0?1:0),r=e.anchorX*e.width,h=e.anchorY*e.height,o=e.x+n+r-(e.$isMasker?0:i.mask?i.mask.x:0),a=e.y+s+h-(e.$isMasker?0:i.mask?i.mask.y:0);e.alpha<1&&(t.globalAlpha=e.alpha),0===o&&0===a||t.translate(o,a),1===e.scaleX&&1===e.scaleY||t.scale(e.scaleX,e.scaleY),0===e.skewX&&0===e.skewY||t.transform(1,e.skewX,e.skewY,1,0,0),0!==e.rotation&&t.rotate(e.rotation*R),(e.anchorX>0||e.anchorY>0)&&t.translate(-n-r,-s-h)}function o(t,e){if(e.fillStyle&&(t.fillStyle=e.fillStyle),e.strokeStyle&&(t.strokeStyle=e.strokeStyle),e.shadowColor&&(t.shadowColor=e.shadowColor),e.shadowBlur>0&&(t.shadowBlur=e.shadowBlur),e.shadowOffsetX>0&&(t.shadowOffsetX=e.shadowOffsetX),e.shadowOffsetY>0&&(t.shadowOffsetY=e.shadowOffsetY),e.lineCap&&(t.lineCap=e.lineCap),e.lineJoin&&(t.lineJoin=e.lineJoin),e.lineWidth>0&&(t.lineWidth=e.lineWidth),e.miterLimit&&(t.miterLimit=e.miterLimit),e.dashLength>0)try{t.setLineDash([e.dashLength,e.dashGap||e.dashLength])}catch(t){}}function a(t){return t.font||t.textStyle+" "+t.textWeight+" "+t.size+"px "+t.fontFamily}function u(t,e){t.font=a(e),t.textAlign=e.textAlign,t.textBaseline=e.textBaseline;var i="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,n=0;e.strokeOnly||(e.textColor&&(t.fillStyle=e.textColor),c(t,"fillText",e,i,n)),(e.stroke||e.strokeOnly)&&(e.strokeColor&&(t.strokeStyle=e.strokeColor),c(t,"strokeText",e,i,n))}function c(t,e,i,n,s){var r=i.size+i.lineSpacing;i.$textArr.forEach(function(i,h){t[e](i,n,s+r*h)})}function l(t,e){for(var i=0,n=e.split(""),s=0;s<n.length;s++)"\n"!==n[s]?(i+=p(t,n[s]),i>t.width&&(i=0,n.splice(s,0,"\n"))):i=0;return n.join("")}function d(t){if(1===t.length)return t[0];var e=t.map(function(t){return t.length});return t[e.indexOf(x(e))]}function p(t,e){return k.font=a(t),k.textAlign=t.textAlign,k.measureText(e).width}function f(t){return t.mask?[t.mask].concat(t.children):t.children}function g(){return"object"==typeof window&&!!window.document&&!!window.setInterval}function m(t){var e=A[t];if(!e){var i=document.body,n=document.createElement("div"),s=document.createTextNode("gM");n.appendChild(s),n.setAttribute("style","font:"+t+";position:absolute;top:0;left:-9999px"),i.appendChild(n),e=n.offsetHeight,A[t]=e,i.removeChild(n)}return e}function v(t){var e=A[t];if(!e){var i=document.createElement("canvas"),n=i.getContext("2d");n.fillRect(0,0,i.width,i.height),n.textBaseline="top",n.fillStyle="white",n.font=t,n.fillText("gM",0,0);for(var s=n.getImageData(0,0,i.width,i.height).data,r=-1,h=-1,o=0;o<i.height;o++)for(var a=0;a<i.width;a++){var u=4*(o*i.width+a);{if(0!==s[u]){r===-1&&(r=o);break}if(a===i.width-1&&r!==-1){h=o,o=i.height;break}}}e=h-r,A[t]=e}return e}function y(t){return 0===t.length?0:Math.min.apply(Math,t)}function x(t){return 0===t.length?0:Math.max.apply(Math,t)}function w(t,e,i){var n=[e],s=[i];return t.forEach(function(t){n.push(t[0]),s.push(t[1])}),{width:x(n)-y(n),height:x(s)-y(s)}}function _(t,e,i){var n=[e||0],s=[i||0];return t.forEach(function(t,e){e%2===0?n.push(t):s.push(t)}),{width:x(n)-y(n),height:x(s)-y(s)}}function b(t){var e=[],i=[];return t.forEach(function(t){e.push(t[0]),i.push(t[1])}),{width:x(e)-y(e),height:x(i)-y(i)}}function T(t,e){for(var i=t.x+(e?t.moveX:0),n=t.y+(e?t.moveY:0),s=t.parent;s;)i+=s.x,n+=s.y,s=s.parent;return{x:i,y:n}}function E(t,e){var i=T(e),n=e.renderContext,s=function(){};s.prototype=e;var r=new s;return r.x=i.x,r.y=i.y,n.save(),h(n,r),n.beginPath(),P[r.drawType||"rect"](n,r),n.restore(),n.isPointInPath(t.x,t.y)}function S(t){var e=T(t,!0);this.x=e.x,this.y=e.y,this.width=t.width,this.height=t.height}var C,M=Math.PI,R=M/180,$=Array.prototype.slice,k=document.createElement("canvas").getContext("2d"),A={},F=g()?function(t){return m(a(t))}:function(t){return v(a(t))};S.prototype={intersects:function(t){return t.x<=this.x+this.width&&t.x+t.width>=this.x&&t.y<=this.y+this.height&&t.y+t.height>=this.y}};var P={rect:function(t,e){t.rect(e.moveX,e.moveY,e.width,e.height)},arc:function(t,e){t.arc(e.radius+e.moveX,e.radius+e.moveY,e.radius,e.startAngle*M,e.endAngle*M,e.counterclockwise)},sector:function(t,e){t.moveTo(e.radius+e.moveX,e.radius+e.moveY),this.arc.apply(this,arguments)},arcTo:function(t,e){t.moveTo(e.moveX,e.moveY),t.arcTo(e.startX,e.startY,e.endX,e.endY,e.radius)},roundRect:function(t,e){t.roundRect(e.moveX,e.moveY,e.width,e.height,e.radius)},lineTo:function(t,e){t.moveTo(e.moveX,e.moveY),e.coords.forEach(function(e){t.lineTo.apply(t,e)})},line:function(t,e){t.moveTo(e.moveX,e.moveY),t.lineTo(e.endX,e.endY)},dashedLine:function(t,e){t.dashedLine(e.moveX,e.moveY,e.endX,e.endY,e.dashLength)},ellipse:function(t,e){t.ellipse(e.width/2+e.moveX,e.height/2+e.moveY,e.width,e.height)},curve:function(t,e){t.curve(e.coords)},quadraticCurveTo:function(t,e){t.moveTo(e.moveX,e.moveY),t.quadraticCurveTo.apply(t,e.coords)},bezierCurveTo:function(t,e){t.moveTo(e.moveX,e.moveY),t.bezierCurveTo.apply(t,e.coords)}},I=t.Event.extend({initialize:function(){I.superclass.initialize.call(this),this.x=0,this.y=0,this.moveX=0,this.moveY=0,this.width=0,this.height=0,this.rotation=0,this.skewX=0,this.skewY=0,this.alpha=1,this.scaleX=1,this.scaleY=1,this.anchorX=0,this.anchorY=0,this.visible=!0,this.touchEnabled=!1,this.$mask=null,this.$hasDefineWidth=!1,this.$hasDefineHeight=!1,this.$hasAddToStage=!1,this.$renderType="DisplayObject",this.cursor="pointer",this.children=[],this.once("addToStage",function(t){this.renderContext=t.renderContext,this.stage=t.stage,this.$hasAddToStage=!0,this.$mask&&this.addMask(this.$mask)},this),this.defineProperty("width",{set:function(t){this.$width=t,this.$hasDefineWidth=!0},get:function(){return this.$width},enumerable:!0}),this.defineProperty("height",{set:function(t){this.$height=t,this.$hasDefineHeight=!0},get:function(){return this.$height},enumerable:!0}),this.defineProperty("mask",{set:function(t){this.$mask=t,this.addMask(t)},get:function(){return this.$mask},enumerable:!0})},remove:function(){return this.parent&&this.parent.removeChild(this),this},each:function(t,e){for(var i=this.children,n=0,s=i.length;n<s&&t.call(e||this,i[n],n,i)!==!1;n++);return this},broadcast:function(){function t(i){i.visible&&(i.dispatch.apply(i,e),i.each(function(e){t(e)}))}var e=$.call(arguments);return t(this),this},emit:function(){var t=$.call(arguments),e=this.parent;for(this.dispatch.apply(this,t);e;)e.dispatch.apply(e,t),e=e.parent;return this},getSize:function(){var t=this.x+this.moveX,e=this.y+this.moveY,i=this.lineWidth||0,n=t+this.width+i,s=e+this.height+i;return{width:n,height:s}},getBounds:function(){return new S(this)},collideWith:function(e){return t.Util.hitTest(this,e)},setParams:function(e){if(t.isObject(e))for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);return this},transform:function(t,e,i,n,s,r){return this.x=s,this.y=r,this.scaleX=t,this.scaleY=n,this.skewX=e,this.skewY=i,this},setTransform:function(t,e,i,n,s,r){return this.x=s,this.y=r,this.rotation=t,this.scaleY=n,this.skewX=e,this.skewY=i,this},defineProperty:function(t,e){return Object.defineProperty(this,t,e),this},addMask:function(e){if(this.$hasAddToStage){var i="Sprite"===this.$renderType,n=i?this:this.parent;if(null===e&&n.$hasAddMask)return n.$mask=null,void(n.$hasAddMask=!1);if(!(e instanceof t.Shape))throw new TypeError("mask must be a instance of EC.Shape");e.parent=n,n.$mask=e,e.$isMasker=!0,n.$hasAddMask=!0}},$triggerAddToStage:function(t,e){var i=function(t){return{target:t,renderContext:e.renderContext,stage:e}},n=function(t){t.$hasAddToStage||t.dispatch("addToStage",i(t)),"Sprite"===t.$renderType&&t.each(n)};n(t)},$triggerRemove:function(t){var e=function(t){t.dispatch("remove",t),"Sprite"===t.$renderType&&t.each(e)};e(t)}}),O=I.extend({initialize:function(){O.superclass.initialize.call(this),this.$renderType="Sprite",this.defineProperty("numChildren",{get:function(){return this.size()},enumerable:!0})},addChild:function(e,i){if(!(e instanceof I))throw new TypeError(String(e)+" is not a instance of EC.DisplayObject");return e.parent=this,t.isNumber(i)?this.children.splice(i,0,e):this.children.push(e),this.$hasAddToStage&&this.$triggerAddToStage(e,this.stage),this},addChildAt:function(){return this.addChild.apply(this,arguments)},removeChild:function(e){var i=this.getChildIndex(e);return i>-1&&this.getChilds().splice(i,1),delete e.parent,t.Tween.removeTweens(e),this.$triggerRemove(e),this},removeChildAt:function(e){var i=this.children;if(i.length<=e)return this;var n=i.splice(e,1)[0];return n&&(delete n.parent,t.Tween.removeTweens(n),this.$triggerRemove(n)),this},removeAllChildren:function(){return t.Tween.removeAllTweens(this),this.each(function(t,e){this.removeChildAt(e)},this),this.children.length=0,this},setChildIndex:function(t,e){var i=this.getChildIndex(t);return i>-1&&(this.children.splice(i,1),this.children.splice(e,0,t)),this},getChilds:function(){return this.children},getChildAt:function(t){var e=this.children;return 0===e.length||e.length<=t?null:e[t]},getChildIndex:function(t){return this.getChilds().indexOf(t)},contains:function(t){return this.getChildIndex(t)>-1},size:function(){return this.children.length}}),j=I.extend({initialize:function(t,e,i,n,s,r,h,o,a){j.superclass.initialize.call(this),this.x=i||0,this.y=n||0,this.$width=o||0,this.$height=a||0,this.$text=t||"",this.$textArr=[],this.$size=e||16,this.textAlign=r||"start",this.textBaseline="top",this.textColor=s||"#000",this.fontFamily=h||"Arial",this.strokeColor=s||"#000",this.textStyle="normal",this.textWeight="normal",this.lineSpacing=2,this.stroke=!1,this.strokeOnly=!1,this.multiline=!1,this.$renderType="TextField";var u=function(){this.multiline?this.$textArr=l(this,this.$text).split(/\n/):(this.$textArr=this.$text.split(/\n/),this.$hasDefineWidth||(this.$width=p(this,d(this.$textArr)))),this.$hasDefineHeight||(this.$height=(F(this)+this.lineSpacing)*this.numLines-this.lineSpacing)};this.defineProperty("text",{get:function(){return this.$text},set:function(t){this.$text=String(t),u.call(this)},enumerable:!0}),this.defineProperty("size",{get:function(){return this.$size},set:function(t){this.$size=t,this.$text&&u.call(this)},enumerable:!0}),this.defineProperty("numLines",{get:function(){return this.$textArr.length},enumerable:!0}),this.defineProperty("bold",{set:function(t){t===!0?this.textWeight="bold":this.textWeight="normal"},get:function(){return"bold"===this.textWeight},enumerable:!0}),this.defineProperty("italic",{set:function(t){t===!0?this.textStyle="italic":this.textStyle="normal"},get:function(){return"italic"===this.textStyle},enumerable:!0}),this.$text&&(this.text=this.$text)}}),D=I.extend({initialize:function(e,i,n,s,r,h,o,a,u){D.superclass.initialize.call(this),this.x=i||0,this.y=n||0,this.$renderType="Bitmap",this.$texture=null,t.isDefined(h)&&(this.sx=h),t.isDefined(o)&&(this.sy=o),t.isDefined(a)&&(this.swidth=a||.1),t.isDefined(u)&&(this.sheight=u||.1),t.isDefined(e)&&this.setTexture(e),t.isDefined(s)&&(this.width=s),t.isDefined(r)&&(this.height=r),this.defineProperty("texture",{set:function(t){this.setTexture(t)},get:function(){return this.$texture},enumerable:!0})},setTexture:function(e){if(t.isString(e))this.setTexture(RES.getRes(e));else{if(!t.isObject(e))throw new TypeError(String(e)+" is a invalid texture");"IMG"===e.nodeName?this.setParams({$texture:e,width:e.width,height:e.height}):this.setParams({$texture:e.texture,width:e.width,height:e.height})}return this}}),z=I.extend({initialize:function(t,e,i,n){z.superclass.initialize.call(this),this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.fillStyle=null,this.strokeStyle=null,this.lineWidth=0,this.shadowColor=null,this.shadowBlur=0,this.shadowOffsetX=0,this.shadowOffsetY=0,this.radius=0,this.dashLength=0,this.dashGap=0,this.lineCap=null,this.lineJoin=null,this.miterLimit=null,this.counterclockwise=!1,this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.startAngle=0,this.endAngle=0,this.coords=[],this.$drawType="rect",this.$renderType="Shape",this.$closePath=!1,this.$needFill=!1,this.$needStroke=!1},setStyle:function(e,i,n){"number"==typeof n&&n<1?this[e]=t.Util.color.toRgb(i,n):this[e]=i||"#000"},fill:function(){var t=$.call(arguments);t.unshift("fillStyle"),this.$needFill=!0,this.setStyle.apply(this,t)},stroke:function(){var t=$.call(arguments);t.unshift("strokeStyle"),this.$needStroke=!0,this.setStyle.apply(this,t)},draw:function(t){P[this.drawType](t,this),this.$isMasker&&t.clip(),this.$closePath&&t.closePath(),this.$needFill&&t.fill(),this.$needStroke&&t.stroke()},close:function(){this.$closePath=!0}});t.extend(z.prototype,{drawRect:function(t,e,i,n){return this.moveX=t,this.moveY=e,this.width=i,this.height=n,this.drawType="rect",this},drawArc:function(t,e,i,n,s,r){return this.moveX=t,this.moveY=e,this.radius=i,this.startAngle=n,this.endAngle=s,this.counterclockwise=r||!1,this.width=2*this.radius,this.height=2*this.radius,this.drawType="arc",this},drawCircle:function(t,e,i){return this.drawArc(t,e,i,0,2,!0),this},drawSector:function(){return this.drawArc.apply(this,arguments),this.drawType="sector",this},arcTo:function(t,e,i,n,s){return this.startX=t,this.startY=e,this.endX=i,this.endY=n,this.radius=s,this.width=t-e,this.height=s,this.drawType="arcTo",this},drawRoundRect:function(t,e,i,n,s){return this.moveX=t,this.moveY=e,this.width=i,this.height=n,this.radius=s,this.drawType="roundRect",this},moveTo:function(t,e){return this.moveX=t,this.moveY=e,this},lineTo:function(t,e){Array.isArray(t)?[].push.apply(this.coords,t):this.coords.push([t,e]);var i=w(this.coords,this.moveX,this.moveY);return this.width=i.width,this.height=i.height,this.drawType="lineTo",this},drawLine:function(t,e,i,n){return this.moveX=t,this.moveY=e,this.endX=i,this.endY=n,this.width=i-t,this.height=this.lineWidth,this.drawType="line",this},drawDashedLine:function(t,e,i,n,s,r){return this.moveX=t,this.moveY=e,this.endX=i,this.endY=n,this.dashLength=s,this.dashGap=r||s,this.width=i-t,this.height=this.lineWidth,this.drawType="dashedLine",this},drawEllipse:function(t,e,i,n){return this.moveX=t,this.moveY=e,this.width=i,this.height=n,this.drawType="ellipse",this},drawCurve:function(t){this.coords=t||[];var e=b(this.coords);return this.width=e.width,this.height=e.height,this.drawType="curve",this},quadraticCurveTo:function(){this.coords=$.call(arguments);var t=_(this.coords,this.moveX,this.moveY);return this.width=t.width,this.height=t.height,this.drawType="quadraticCurveTo",this},bezierCurveTo:function(){this.coords=$.call(arguments);var t=_(this.coords,this.moveX,this.moveY);return this.width=t.width,this.height=t.height,this.drawType="bezierCurveTo",this}}),t.extend(CanvasRenderingContext2D.prototype,{roundRect:function(t,e,i,n,s){return i<2*s&&(s=i/2),n<2*s&&(s=n/2),this.moveTo(t+s,e),this.arcTo(t+i,e,t+i,e+n,s),this.arcTo(t+i,e+n,t,e+n,s),this.arcTo(t,e+n,t,e,s),this.arcTo(t,e,t+i,e,s),this.closePath(),this},dashedLine:function(t,i,n,s,r){if(this.setLineDash)this.moveTo(t,i),this.lineTo(n,s);else for(var h=r===e?5:r,o=n-t,a=s-i,u=Math.floor(Math.sqrt(o*o+a*a)/h),c=0;c<u;c++)c%2===0?this.moveTo(t+o/u*c,i+a/u*c):this.lineTo(t+o/u*c,i+a/u*c);return this},ellipse:function(t,e,i,n){var s=i/.75/2,r=n/2;return this.moveTo(t,e-r),this.bezierCurveTo(t+s,e-r,t+s,e+r,t,e+r),this.bezierCurveTo(t-s,e+r,t-s,e-r,t,e-r),this.closePath(),this},curve:function(e){for(var i,n=0,s=e.length;n<s;n++)0===n?this.moveTo(e[0][0],e[0][1]):(i=t.Util.getCtrlPoint(e,n-1),this.bezierCurveTo(i.a.x,i.a.y,i.b.x,i.b.y,e[n][0],e[n][1]))}});var X=z.extend({initialize:function(t,e,i,n){X.superclass.initialize.call(this),this.drawRect(t,e,i,n)}}),Y=O.extend({initialize:function(t,e,i,n){Y.superclass.initialize.call(this),this.x=t||0,this.y=e||0,this.$width=i||0,this.$height=n||0},addChild:function(){return Y.superclass.addChild.apply(this,arguments),this.resize(),this},removeChild:function(){return Y.superclass.removeChild.apply(this,arguments),this.resize(),this},removeChildAt:function(){return Y.superclass.removeChildAt.apply(this,arguments),this.resize(),this},removeAllChildren:function(){return Y.superclass.removeAllChildren.apply(this,arguments),this.resize(),this},setChildIndex:function(){return Y.superclass.setChildIndex.apply(this,arguments),this},resize:function(){var t,e=[],i=[];return this.each(function(n){t=n.getSize(),e.push(t.width),i.push(t.height)},this),this.$hasDefineWidth||(this.$width=x(e)),this.$hasDefineHeight||(this.$height=x(i)),this}}),L=Y.extend({initialize:function(){L.superclass.initialize.apply(this,arguments),this.width=400,this.height=64,this.backgroundAlpha=1,this.backgroundColor="",this.backgroundImage="",this.backgroundRepeat="repeat",this.borderAlpha=1,this.borderColor="#000",this.borderRadius=0,this.borderWidth=2,this.padding=3,this.fontSize=28,this.color="#000",this.placeholderColor="#777",this.placeholder="",this.fontFamily="",this.lineSpacing=2,this.inputType="text",this.once("addToStage",function(){this.$create(),this.$events()},this),this.once("remove",function(){this.inputText.parentNode.removeChild(this.inputText),window.removeEventListener(t.EVENTS.RESIZE,this.resizeListener,!1)},this)},$create:function(){var e=this.padding;this.touchEnabled=!0,this.cursor="",this.padding=t.isArray(e)?e:[e,e,e,e],this.input=new z,this.textField=new j,this.inputText=document.createElement("textarea"===this.inputType?"textarea":"input"),this.input.x=this.borderWidth/2,this.input.y=this.borderWidth/2,this.input.lineWidth=this.borderWidth,this.input.stroke(this.borderColor,this.borderAlpha);var i=this.backgroundImage;if(t.isObject(i)){var n=this.renderContext.createPattern("IMG"===i.nodeName?i:i.texture,this.backgroundRepeat);this.input.fill(n)}else this.backgroundColor&&this.input.fill(this.backgroundColor,this.backgroundAlpha);this.borderRadius>0?this.input.drawRoundRect(0,0,this.width,this.height,this.borderRadius):this.input.drawRect(0,0,this.width,this.height),"textarea"!==this.inputType&&(this.inputText.type=this.inputType),this.placeholder&&(this.inputText.setAttribute("placeholder",this.placeholder),this.textField.text=this.placeholder,this.textField.textColor=this.placeholderColor),this.textField.width=this.width-this.padding[1]-this.padding[3],this.textField.multiline=!0,this.textField.lineSpacing="textarea"!==this.inputType?this.height:this.lineSpacing,this.textField.size=this.fontSize,this.textField.fontFamily=this.fontFamily||this.textField.fontFamily,this.textField.x=this.borderWidth+this.padding[3],this.textField.y="textarea"===this.inputType?this.padding[0]:(this.height-this.textField.height)/2,this.mask=new t.Rectangle(0,0,this.width+this.borderWidth,this.height+this.borderWidth),this.addChild(this.input),this.addChild(this.textField),this.$setInputStyle(),C||(C=document.createElement("div"),C.id="StageTextInputDiv",C.style.cssText="position:absolute;margin:0;padding:0;border:none;",document.body.appendChild(C)),C.appendChild(this.inputText)},$setInputStyle:function(){var t=this,e=1/this.stage.scaleRatio,i="textarea"===this.inputType?-this.lineSpacing/2:0,n=T(this);this.inputText.style.cssText="display:none;position:absolute;border:none;background:none;outline:none;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-text-size-adjust:none;text-size-adjust:none;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:auto;resize:none;left:"+(n.x+t.borderWidth/2)*e+"px;top:"+n.y*e+"px;width:"+this.width*e+"px;height:"+this.height*e+"px;line-height:"+(this.fontSize+this.lineSpacing)*e+"px;font-size:"+this.fontSize*e+"px;font-family:"+(this.fontFamily||this.textField.fontFamily)+";color:"+this.color+";margin-top:"+i+"px;padding:"+this.padding.map(function(i){return(i+t.borderWidth/2)*e+"px"}).join(" ")},$events:function(){this.on("touch",function(){this.textField.visible=!1,this.inputText.style.display="block",this.inputText.focus()},this),this.inputText.addEventListener("focus",function(t){this.dispatch("focus",{target:this,originalEvent:t,value:this.inputText.value})}.bind(this),!1),this.inputText.addEventListener("change",function(t){this.dispatch("change",{target:this,originalEvent:t,value:this.inputText.value})}.bind(this),!1),this.inputText.addEventListener("blur",function(t){var e=this.inputText.value;this.textField.text=e||this.placeholder,this.textField.textColor=e?this.color:this.placeholderColor,this.textField.visible=!0,this.inputText.style.display="none",this.dispatch("blur",{target:this,originalEvent:t,value:e})}.bind(this),!1),this.inputText.addEventListener("input",function(t){this.dispatch("input",{target:this,originalEvent:t,value:this.inputText.value})}.bind(this),!1),window.addEventListener(t.EVENTS.RESIZE,this.resizeListener=function(){this.$setInputStyle()}.bind(this),!1)}}),B=Y.extend({initialize:function(){B.superclass.initialize.apply(this,arguments),this.$text="",this.$font="",this.textAlign="left",this.letterSpacing=0,this.$renderType="BitmapText",this.$textArr=[],this.$textwrap=new Y,this.defineProperty("text",{set:function(t){this.$text=t,this.$textArr=t.split("")},get:function(){return this.$text},enumerable:!0}),this.defineProperty("font",{set:function(t){this.$font=t,this.$createData()},get:function(){return this.$font}}),this.once("addToStage",function(){this.addChild(this.$textwrap)},this)},$createData:function(){this.$fontData=(t.isString(this.$font)?RES.getRes(this.$font+"_fnt"):this.$font).data,this.$fontTexture=RES.getRes(this.$fontData.file.replace(/\.(\w+)$/,"_$1")).texture}}),N=Y.extend({initialize:function(e){N.superclass.initialize.call(this);var i={x:0,y:0,size:16,textColor:"#000",alpha:1},n=t.extend({},i,this.$getConfig(e.normal)||{}),s=t.extend({},i,this.$getConfig(e.hover)||{}),r=t.extend({},i,this.$getConfig(e.active)||{}),h=t.extend({},i,this.$getConfig(e.disabled)||{});this.statusCfg={normal:n,hover:s,active:r,disabled:h};for(var o in this.statusCfg)t.isString(this.statusCfg[o].texture)&&t.extend(this.statusCfg[o],RES.getRes(this.statusCfg[o].texture));this.bitMap=new D,this.shape=new z,this.textField=new j,this.once("addToStage",function(){this.$create(),this.$events()},this)},$create:function(){this.setButton("normal"),this.addChild(this.bitMap),this.addChild(this.shape),this.addChild(this.textField)},$getConfig:function(e){return t.isString(e)?RES.getRes(e):e},setButton:function(e){this.touchEnabled="disabled"!==e;var i=t.isString(e)?this.statusCfg[e]:e;if(i=t.extend({},this.statusCfg.normal,i),t.extend(this,{width:i.width,height:i.height}),i.texture?(t.extend(this.bitMap,{x:i.x,y:i.y,alpha:i.alpha,texture:i.texture,width:i.width,height:i.height}),this.bitMap.visible=!0):this.bitMap.visible=!1,i.fillStyle||i.strokeStyle?(t.extend(this.shape,i),i.radius&&i.radius>0?this.shape.drawRoundRect(0,0,i.width,i.height,i.radius):this.shape.drawRect(0,0,i.width,i.height),i.fillStyle&&this.shape.fill(i.fillStyle),i.strokeStyle&&this.shape.stroke(i.strokeStyle),this.shape.visible=!0):this.shape.visible=!1,i.text){this.textField.text=i.text;var n={textAlign:"center",y:i.y+(this.height-this.textField.height)/2,height:this.textField.height};t.extend(this.textField,t.extend({},i,n)),this.textField.visible=!0}else this.textField.visible=!1;return i},$events:function(){this.on("touchstart",function(){this.setButton("active")},this),this.on("touchend",function(){this.setButton("normal")},this),t.isTouch||(this.on("touchenter",function(){this.setButton("hover")},this),this.on("touchout",function(){this.setButton("normal")},this))}}),q=function(t,e){this.x=t||0,this.y=e||0};t.extend(q.prototype,{toString:function(){return"[object EC.Point("+this.x+","+this.y+")]"},set:function(t,e){return this.x=t,this.y=e,this},clone:function(){return new q(this.x,this.y)},add:function(t){return new q(this.x+t.x,this.y+t.y)},distance:function(){return q.calcDistance(this.x,this.y,0,0)},copyFrom:function(t){return this.set(t.x,t.y),this},equals:function(t){return this.x===t.x&&this.y===t.y},offset:function(t,e){return this.x+=t,this.y+=e,this},subtract:function(t){return new q(this.x-t.x,this.y-t.y)},getAngle:function(){return q.getAngle(0,0,this.x,this.y)}}),t.extend(q,{calcDistance:function(t,e,i,n){var s=Math.abs(i-t),r=Math.abs(n-e);return Math.sqrt(s*s+r*r)},distance:function(t,e){return this.calcDistance(t.x,t.y,e.x,e.y)},fromValues:function(t,e){var i=new Array(2);return i[0]=t,i[1]=e,i},getAngle:function(t,e,i,n){var s=Math.abs(t-i),r=Math.abs(e-n),h=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),o=r/h,a=Math.acos(o),u=180/(Math.PI/a);return i>t&&n>e&&(u=180-u),i===t&&n>e&&(u=180),i>t&&n===e&&(u=90),i<t&&n>e&&(u=180+u),i<t&&n===e&&(u=270),i<t&&n<e&&(u=360-u),u}});var V=O.extend({initialize:function(e,i){V.superclass.initialize.call(this),this.canvas=e,this.renderContext=this.canvas.getContext("2d");var n=this,s=this.options=t.extend({},{showFps:!1,scaleMode:"showAll",forceUpdate:!1,frameRate:60,width:window.innerWidth,height:window.innerHeight,blendMode:null,autoRender:!0,autoPauseRender:!0,needEvents:!0,onPause:t.noop,onResume:t.noop},i||{});this.width=parseFloat(this.canvas.getAttribute("width"))||s.width,this.height=parseFloat(this.canvas.getAttribute("height"))||s.height,this.scaleRatio=1,this.cursor="",this.$isRendering=!1,this.$ticker=new t.Ticker({useInterval:s.forceUpdate,frameRate:s.frameRate}),this.canvas.width=this.width,this.canvas.height=this.height,this.defineProperty("blendMode",{set:function(t){n.renderContext.globalCompositeOperation=t},enumerable:!0}),s.blendMode&&(this.blendMode=s.blendMode),"noScale"!==s.scaleMode&&this.setAdapter(),s.showFps&&(this.createFps(),this.showFps()),this.$initEvents(),s.autoRender&&this.startRender()},addChild:function(t){return V.superclass.addChild.apply(this,arguments),this.$triggerAddToStage(t,this),this},render:function(t){var e=this,i=this.renderContext,n=function(s){s.visible&&(s.dispatch("enterframe",t),"Sprite"===s.$renderType?(i.save(),h(i,s),f(s).forEach(function(t){n(t)}),i.restore()):e.renderItem(i,s))};return n(this),this},renderItem:function(t,e){switch(e.$isMasker||t.save(),h(t,e),e.$renderType){case"Sprite":i(t,e);break;case"Bitmap":i(t,e);break;case"BitmapText":s(t,e);break;case"TextField":u(t,e);break;case"Shape":r(t,e)}e.$isMasker||t.restore()},clear:function(){return this.renderContext.clearRect(0,0,this.width,this.height),this},startRender:function(){if(!this.$isRendering)return this.$isRendering=!0,this.$ticker.start(),this.options.onResume(),this},stopRender:function(){return this.$ticker.stop(),this.$isRendering=!1,this.options.onPause(),this},setAdapter:function(){
var e=this.canvas.parentNode,i="BODY"===e.nodeName?window.innerWidth:e.offsetWidth-parseFloat(t.getStyle(e,"padding-left"))-parseFloat(t.getStyle(e,"padding-right")),n="BODY"===e.nodeName?window.innerHeight:e.offsetHeight-parseFloat(t.getStyle(e,"padding-top"))-parseFloat(t.getStyle(e,"padding-bottom")),s=i,r=this.height/this.width*s,h=0;switch(this.options.scaleMode){case"showAll":r>n&&(r=n,s=this.width/this.height*r);break;case"noBorder":h=(n-r)/2;break;case"fixedWidth":}return this.canvas.style.width=s+"px",this.canvas.style.height=r+"px",this.canvas.style.marginTop=h+"px",this.scaleRatio=this.width/s,this},$initEvents:function(){var e=this,i=this.options,n=i.showFps,s=null;this.$ticker.on("ticker",function(e){n&&this.FPS.begin(),this.clear(),this.render(e),t.groupManager.update(e),n&&this.FPS.end()},this),"noScale"!==i.scaleMode&&window.addEventListener(t.EVENTS.RESIZE,function(){s&&clearTimeout(s),s=setTimeout(e.setAdapter.bind(e),100)},!1),i.autoPauseRender&&i.autoRender&&(document.addEventListener(t.EVENTS.VISIBILITYCHANGE,function(){document[t.EVENTS.HIDDEN]?e.stopRender():e.startRender()},!1),window.addEventListener("focus",function(){e.startRender()},!1),window.addEventListener("blur",function(){e.stopRender()},!1)),i.needEvents&&(new t.TouchEvent).attach(this)},createFps:function(){this.FPS=new Stats},showFps:function(e){this.options.showFps&&(t.isObject(e)&&(this.FPS.dom.style.left=t.isDefined(e.left)?t.isNumber(e.left)?e.left+"px":e.left:"",this.FPS.dom.style.right=t.isDefined(e.right)?t.isNumber(e.right)?e.right+"px":e.right:"",this.FPS.dom.style.top=t.isDefined(e.top)?t.isNumber(e.top)?e.top+"px":e.top:"",this.FPS.dom.style.bottom=t.isDefined(e.bottom)?t.isNumber(e.bottom)?e.bottom+"px":e.bottom:""),this.$fpsDom||document.body.appendChild(this.$fpsDom=this.FPS.dom))}});["createLinearGradient","createPattern","createRadialGradient","addColorStop","createImageData","putImageData","getImageData","isPointInPath"].forEach(function(t){V.prototype[t]=function(){return this.renderContext[t].apply(this,arguments)}}),t.provide({TextField:j,Bitmap:D,BitmapText:B,Shape:z,Rectangle:X,TextInput:L,DisplayObject:I,DisplayObjectContainer:O,Sprite:Y,Button:N,Point:q,Stage:V,isPointInPath:E})}(window.EC),function(t,e){"use strict";var i=t.Sprite.extend({initialize:function(e,n,s){if(i.superclass.initialize.call(this),this._startFrame=0,this._playTimes=-1,this._resKey=s,this.currentFrame=0,this.setRES(e,n),this._clip=new t.Bitmap(this.RESUrl),Array.isArray(this.RESUrl))this.width=this.RESUrl[0].width,this.height=this.RESUrl[0].height,this.totalFrames=this.RESUrl.length,this.setFrame=this.setFrameByPath;else{var r=this.RES.mc[s].frames[0].res,h=this.RES.res[r];this.width=h.w,this.height=h.h,this.setFrame=this.setFrameBySprite}this._timer=new t.Timer(this.frameRate,this._repeatCount),this._initEvents()},setRES:function(e,i,r){this.RESUrl=n(e),this.RES=s(i,this._resKey),this.currentFrame=0,this.frame=this.getMovieClipData(this._resKey),this.frameRate=Math.round(1e3/(this.frame.frameRate||24)),this.totalFrames=this.frame.frames.length,Array.isArray(this.RESUrl)?this.texture=this.RESUrl[this.currentFrame].texture:(t.isObject(this.RESUrl)&&"nodeType"in this.RESUrl&&(this.RESUrl={texture:this.RESUrl,width:this.RESUrl.width,height:this.RESUrl.height}),this.texture=this.RESUrl.texture),r&&this.setFrameRate(r)},getMovieClipData:function(t){return this.RES.mc[t]||[]},gotoAndPlay:function(t,e,i){return t=Math.max(0,t-1),this._startFrame=t,this._playTimes=e,this.currentFrame=t,this._playTimes>0&&(this._repeatCount=this._playTimes*this.totalFrames,this._timer.setRepeatCount(this._repeatCount)),i&&this.setFrameRate(Math.round(1e3/i)),this.setFrame(this.currentFrame),this.play(),this},gotoAndStop:function(t){return this.stop(),this.setFrame(t),this},prevFrame:function(){return this.setFrame(--this.currentFrame)},nextFrame:function(){return this.setFrame(++this.currentFrame)},play:function(){return this.isPlaying()?this:(this._timer.start(),this)},isPlaying:function(){return this._timer.isPlaying()},stop:function(){return this._timer.stop(),this},pause:function(t){return this._timer.pause(t),this},wait:function(t){return this._timer.wait(t),this},setFrameRate:function(t){this.frameRate=t},setFrameBySprite:function(t){var i=this.frame.frames[t]||{},n=this.RES.res[i.res];if(n!==e)return this._timer.delay=(i.duration||0)*this.frameRate,this._clip.x=i.x||0,this._clip.y=i.y||0,this._clip.sx=n.x||0,this._clip.sy=n.y||0,this._clip.swidth=n.w||this.width||0,this._clip.sheight=n.h||this.height||0,this._clip.width=this._clip.swidth,this._clip.height=this._clip.sheight,this.width=this._clip.width,this.height=this._clip.height,this},setFrameByPath:function(t){var e=this.frame.frames[t]||{},i=this.RESUrl[t];return this._timer.delay=(e.duration||0)*this.frameRate,this._clip.texture=i.texture,this._clip.x=e.x||0,this._clip.y=e.y||0,this._clip.width=i.width||this._clip.width||0,this._clip.height=i.height||this._clip.height||0,this.width=this._clip.width,this.height=this._clip.height,this},_initEvents:function(){this.once("addToStage",function(){this.addChild(this._clip)},this),this.on("remove",function(){this.stop()},this),this._timer.on("timer",function(){++this.currentFrame>this.totalFrames-1&&(this.currentFrame=this._startFrame,this.dispatch("loopcomplete")),this.setFrame(this.currentFrame)},this),this._timer.on("complete",function(){this.dispatch("complete")},this),this._timer.on("pause",function(){this.dispatch("pause")},this)}}),n=function(t){return/_(png|jpg|jpeg|gif|bmp|webp)$/.test(t)?RES.getRes(t):t},s=function(t,i){if("string"==typeof t)return RES.getRes(t);if(Array.isArray(t)){var n=[],s={},h={mc:{},res:{}};return t.forEach(function(t){var e=t.split(" "),i=r();n.push({res:i,x:0,y:0,duration:1}),s[i]={x:-1*e[0],y:-1*e[1]}}),h.mc[i]={frames:n,frameRate:24},h.res=s,h}if("object"==typeof t&&!t.mc){var n=[],s={},h={mc:{},res:{}};for(var o in t){var a=t[o],u=r();n.push({res:u,key:o,x:a.offX,y:a.offY,duration:a.duration===e?1:a.duration}),s[u]={x:a.x,y:a.y,w:a.w,h:a.h}}return n=n.sort(function(t,e){return parseInt(t.key.replace(/^[^\d]+/,""))-parseInt(e.key.replace(/^[^\d]+/,""))}),h.mc[i]={frames:n,frameRate:24},h.res=s,h}return t},r=function(t){var e="",i=0;for(t=t||8;i++<t;)e+=Math.floor(16*Math.random()).toString(16);return e.toUpperCase()};t.provide({MovieClip:i})}(window.EC),function(t,e){"use strict";var i=t.Sprite.extend({initialize:function(){i.superclass.initialize.apply(this,arguments),this.cursor="",this.vertical=!0,this.adjustValue=0,this.initialValue=0,this.disabled=!1,this.$layout=null,this.touchScroll=null,this.once("addToStage",function(){this.mask=new t.Rectangle(0,0,this.width,this.height),this.layout&&(this.addChild(this.layout),this._createScroll())},this),Object.defineProperty(this,"layout",{set:function(t){this.$layout=t,this.$hasAddToStage&&(this.clearContent(),this.addChild(t),this.touchScroll?this.refresh():this._createScroll())},get:function(){return this.$layout},enumerable:!0})},scrollTo:function(){var t=this.touchScroll;return t&&t.scrollTo.apply(t,arguments),this},stop:function(){var t=this.touchScroll;return t&&t.stop.apply(t,arguments),this},setContent:function(t){return this.layout=t,this},clearContent:function(){return this.removeAllChildren(),this},refresh:function(){return this.touchScroll.min=Math.min(0,(this.vertical?this.height-this.layout.height:this.width-this.layout.width)-this.adjustValue),this},_createScroll:function(){var e=this;this.touchScroll=new t.TouchScroll({touch:this,vertical:this.vertical,target:this.layout,property:this.vertical?"y":"x",max:0,min:0,step:this.step,fixed:this.disabled,initialValue:this.initialValue,scroll:function(t){0===t?e.dispatch("totop",t):t===e.touchScroll.min?e.dispatch("tobottom",t):e.dispatch("scroll",t)},reboundEnd:function(t){e.dispatch("rebound",t)},animationEnd:function(t){e.dispatch("scrollstop",t)}}),this.refresh()}});t.provide({ScrollView:i})}(window.EC);var Stats=function(){function t(){return window.performance&&performance.now?performance.now():Date.now()}function e(t){return s.appendChild(t.dom),t}function i(t){for(var e=0;e<s.children.length;e++)s.children[e].style.display=e===t?"block":"none";n=t}var n=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(t){t.preventDefault(),i(++n%s.children.length)},!1);var r=t(),h=r,o=0,a=e(new Stats.Panel("FPS","#0ff","#002")),u=e(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new Stats.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:s,addPanel:e,showPanel:i,begin:function(){r=t()},end:function(){o++;var e=t();if(u.update(e-r,200),e>h+1e3&&(a.update(1e3*o/(e-h),100),h=e,o=0,c)){var i=performance.memory;c.update(i.usedJSHeapSize/1048576,i.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:s,setMode:i}};Stats.Panel=function(t,e,i){var n=1/0,s=0,r=Math.round,h=r(window.devicePixelRatio||1),o=80*h,a=48*h,u=3*h,c=2*h,l=3*h,d=15*h,p=74*h,f=30*h,g=document.createElement("canvas");g.width=o,g.height=a,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*h+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,o,a),m.fillStyle=e,m.fillText(t,u,c),m.fillRect(l,d,p,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(l,d,p,f),{dom:g,update:function(a,v){n=Math.min(n,a),s=Math.max(s,a),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,o,d),m.fillStyle=e,m.fillText(r(a)+" "+t+" ("+r(n)+"-"+r(s)+")",u,c),m.drawImage(g,l+h,d,p-h,f,l,d,p-h,f),m.fillRect(l+p-h,d,h,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(l+p-h,d,h,r((1-a/v)*f))}}},"object"==typeof module&&(module.exports=Stats);