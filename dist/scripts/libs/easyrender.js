var EC={version:"1.0.5"};!function(t){"use strict";var e=Array.prototype.slice,i=Object.prototype.toString,n=Object.prototype.hasOwnProperty,s=Array.prototype,r=Object.prototype,o=Function.prototype;Date.now||(Date.now=function(){return+new Date}),Object.create=function(){function t(){}return function(e){if("object"!=typeof e)throw TypeError("Object prototype may only be an Object or null");t.prototype=e;var i=new t;if(t.prototype=null,arguments.length>1){var s=Object(arguments[1]);for(var r in s)n.call(s,r)&&(i[r]=s[r])}return i}}(),o.bind||(o.bind=function(){var t=this,e=[].shift.call(arguments),i=[].slice.call(arguments);return function(){return t.apply(e,[].concat.call(i,[].slice.call(arguments)))}}),s.find||(s.find=function(t){for(var e=0,i=this.length;e<i;e++)if(t&&t(this[e],e,this)===!0)return this[e]}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===r.toString.call(t)}),s.contains=s.includes||function(t){return this.indexOf(t)>-1};var h="ontouchstart"in document,a=navigator.userAgent,u=window.navigator.msPointerEnabled,c=u&&/IEMobile/i.test(a);h=h||c||!1;var l=c?{START:"MSPointerDown",MOVE:"MSPointerMove",END:"MSPointerCancel"}:{START:h?"touchstart":"mousedown",MOVE:h?"touchmove":"mousemove",END:h?"touchend":"mouseup"};l.RESIZE="onorientationchange"in window?"orientationchange":"resize";var d=t.extend=function(t){for(var i,n,s=e.call(arguments,1),r=0;r<s.length;r++)for(n in i=s[r])i.hasOwnProperty(n)&&(t[n]=i[n]);return t};t.provide=function(e){"object"==typeof e&&d(t,e)},t.provide({isDefined:function(t){return"undefined"!=typeof t},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},isFunction:function(t){return"function"==typeof t},isObject:function(t){return"object"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===i.call(t)},upperKey:function(t){return t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})},getStyle:function(e,i){return window.getComputedStyle(e,null)[t.upperKey(i)]}});var f=function(t,e){var i,s=this;return i=t&&n.call(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},d(i,s,e),i.prototype=Object.create(s.prototype,t),i.prototype.constructor=i,i.superclass=s.prototype,i};t.provide({classExtend:f,ua:a,isTouch:h,noop:function(){},EVENTS:l})}(EC),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function i(t){$=t}function n(t){W=t}function s(){return function(){return process.nextTick(u)}}function r(){return"undefined"!=typeof H?function(){H(u)}:a()}function o(){var t=0,e=new J(u),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}function a(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<U;t+=2){var e=Z[t],i=Z[t+1];e(i),Z[t]=void 0,Z[t+1]=void 0}U=0}function c(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,r()}catch(t){return a()}}function l(t,e){var i=arguments,n=this,s=new this.constructor(f);void 0===s[et]&&M(s);var r=n._state;return r?!function(){var t=i[r-1];W(function(){return A(r,s,t,n._result)})}():S(n,s,t,e),s}function d(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var i=new e(f);return _(i,t),i}function f(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function m(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}function w(t,e,i){W(function(t){var n=!1,s=v(i,e,function(i){n||(n=!0,e!==i?_(t,i):T(t,i))},function(e){n||(n=!0,E(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&s&&(n=!0,E(t,s))},t)}function y(t,e){e._state===nt?T(t,e._result):e._state===st?E(t,e._result):S(e,void 0,function(e){return _(t,e)},function(e){return E(t,e)})}function x(t,i,n){i.constructor===t.constructor&&n===l&&i.constructor.resolve===d?y(t,i):n===rt?E(t,rt.error):void 0===n?T(t,i):e(n)?w(t,i,n):T(t,i)}function _(e,i){e===i?E(e,p()):t(i)?x(e,i,m(i)):T(e,i)}function b(t){t._onerror&&t._onerror(t._result),C(t)}function T(t,e){t._state===it&&(t._result=e,t._state=nt,0!==t._subscribers.length&&W(C,t))}function E(t,e){t._state===it&&(t._state=st,t._result=e,W(b,t))}function S(t,e,i,n){var s=t._subscribers,r=s.length;t._onerror=null,s[r]=e,s[r+nt]=i,s[r+st]=n,0===r&&t._state&&W(C,t)}function C(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,s=void 0,r=t._result,o=0;o<e.length;o+=3)n=e[o],s=e[o+i],n?A(i,n,s,r):s(r);t._subscribers.length=0}}function k(){this.error=null}function F(t,e){try{return t(e)}catch(t){return ot.error=t,ot}}function A(t,i,n,s){var r=e(n),o=void 0,h=void 0,a=void 0,u=void 0;if(r){if(o=F(n,s),o===ot?(u=!0,h=o.error,o=null):a=!0,i===o)return void E(i,g())}else o=s,a=!0;i._state!==it||(r&&a?_(i,o):u?E(i,h):t===nt?T(i,o):t===st&&E(i,o))}function R(t,e){try{e(function(e){_(t,e)},function(e){E(t,e)})}catch(e){E(t,e)}}function O(){return ht++}function M(t){t[et]=ht++,t._state=void 0,t._result=void 0,t._subscribers=[]}function P(t,e){this._instanceConstructor=t,this.promise=new t(f),this.promise[et]||M(this.promise),q(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):E(this.promise,j())}function j(){return new Error("Array Methods must be provided an Array")}function X(t){return new P(this,t).promise}function Y(t){var e=this;return new e(q(t)?function(i,n){for(var s=t.length,r=0;r<s;r++)e.resolve(t[r]).then(i,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function I(t){var e=this,i=new e(f);return E(i,t),i}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(t){this[et]=O(),this._result=this._state=void 0,this._subscribers=[],f!==t&&("function"!=typeof t&&z(),this instanceof L?R(this,t):D())}function B(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=L}var N=void 0;N=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var q=N,U=0,H=void 0,$=void 0,W=function(t,e){Z[U]=t,Z[U+1]=e,U+=2,2===U&&($?$(u):tt())},V="undefined"!=typeof window?window:void 0,G=V||{},J=G.MutationObserver||G.WebKitMutationObserver,K="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),tt=void 0;tt=K?s():J?o():Q?h():void 0===V&&"function"==typeof require?c():a();var et=Math.random().toString(36).substring(16),it=void 0,nt=1,st=2,rt=new k,ot=new k,ht=0;return P.prototype._enumerate=function(){for(var t=this.length,e=this._input,i=0;this._state===it&&i<t;i++)this._eachEntry(e[i],i)},P.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===d){var s=m(t);if(s===l&&t._state!==it)this._settledAt(t._state,e,t._result);else if("function"!=typeof s)this._remaining--,this._result[e]=t;else if(i===L){var r=new i(f);x(r,t,s),this._willSettleAt(r,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},P.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===it&&(this._remaining--,t===st?E(n,i):this._result[e]=i),0===this._remaining&&T(n,this._result)},P.prototype._willSettleAt=function(t,e){var i=this;S(t,void 0,function(t){return i._settledAt(nt,e,t)},function(t){return i._settledAt(st,e,t)})},L.all=X,L.race=Y,L.resolve=d,L.reject=I,L._setScheduler=i,L._setAsap=n,L._asap=W,L.prototype={constructor:L,then:l,catch:function(t){return this.then(null,t)}},L.polyfill=B,L.Promise=L,L}),ES6Promise.polyfill(),function(t){"use strict";function e(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?i[2]:null}function i(t,e){return t.getBounds().intersects(e.getBounds())}var n=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,s={};s.toHex=function(t){if(/^(rgb|RGB)/.test(t)){for(var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),i="#",s=0;s<e.length;s++){var r=Number(e[s]).toString(16);"0"===r&&(r+=r),i+=r}return 7!==i.length&&(i=t),i}if(!n.test(t))return t;var o=t.replace(/#/,"").split("");if(6===o.length)return t;if(3===o.length){for(var h="#",s=0;s<o.length;s+=1)h+=o[s]+o[s];return h}},s.toRgb=function(t,e){var i=t.toLowerCase();if(i&&n.test(i)){var s="rgb";if(4===i.length){for(var r="#",o=1;o<4;o+=1)r+=i.slice(o,o+1).concat(i.slice(o,o+1));i=r}for(var h=[],o=1;o<7;o+=2)h.push(parseInt("0x"+i.slice(o,o+2)));return"number"==typeof e&&(h.push(e),s="rgba"),s+"("+h.join(",")+")"}return i},t.Util=t.Util||{},t.extend(t.Util,{color:s,getParameter:e,hitTest:i})}(window.EC),function(t){"use strict";var e=Array.prototype.slice,i=function(){this.initialize.apply(this,arguments)};t.extend(i.prototype,{initialize:function(){return this._eventPool={},this},on:function(t,e,i){var n=this._eventPool;return(n[t]||(n[t]=[])).push({fn:e,ctx:i||this}),this},once:function(t,e,i){function n(){s.off(t,n),e.apply(this,arguments)}var s=this;return n._=e,this.on(t,n,i)},off:function(t,e){var i=this._eventPool,n=i[t],s=[];return n&&e&&(s=n.filter(function(t){return t.fn!==e&&t.fn._!==e})),s.length?i[t]=s:delete i[t],this},dispatch:function(t){var i=e.call(arguments,1),n=(this._eventPool[t]||[]).slice();return n.length&&n.forEach(function(t){t.fn.apply(t.ctx,i)}),this},emit:function(){return this.dispatch.apply(this,arguments)},success:function(t){return this.on("success",t)},complete:function(t){return this.on("complete",t)},error:function(t){return this.on("error",t)},progress:function(t){return this.on("progress",t)},clear:function(){return this._eventPool={},this}}),i.extend=t.classExtend,t.provide({Event:i})}(window.EC),function(t){"use strict";function e(t){EC.extend(p,t||{})}function i(t,e){var i=null;if(!e)var n=Date.now()+1e18*Math.random();if("object"==typeof t){i=[],e||(t._=n);for(var s in t)i.push(s+"="+t[s]);i=i.join("&")}else"string"==typeof t&&(i=t,e||(i+="&_="+n));return i}function n(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function s(t){function e(e){o&&clearTimeout(o),n(p.success,t.success).call(t.context,"jsonp"==h?e:"xml"==h?r.responseXML:"json"==h?JSON.parse(r.responseText):r.responseText,r),n(p.complete,t.complete).call(t.context,r,r.status,r.statusText)}function s(){o&&clearTimeout(o),n(p.error,t.error).call(t.context,r,r.status,r.statusText),n(p.complete,t.complete).call(t.context,r,r.status,r.statusText)}t=EC.extend({},p,t||{});var r=t.createXHR();if(r){if(t.beforeSend.call(t.context,r)===!1)return r.abort(),r;var o,h=t.dataType.toLowerCase(),a=t.type.toUpperCase(),u=t.url,c=i(t.data,t.cache);if(t.async&&t.timeout>0&&(o=setTimeout(function(){r.readyState<4&&(r.abort(),s())},t.timeout)),"GET"==a&&c&&(u+=u.indexOf("?")>-1?"&"+c:"?"+c,c=null),"jsonp"==h)return u+=(u.indexOf("?")>-1?"&":"?")+"callback="+t.callbackName,d(u,e,s),r;if(r.onload?(r.onload=function(){r.onload=new Function,e()},r.onerror=function(){r.onerror=new Function,s()}):r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||304==r.status?(r.onreadystatechange=new Function,e()):s())},r.open(a,u,t.async),t.cors)try{r.withCredentials=!0}catch(t){}t.cors||(t.headers["X-Requested-With"]="XMLHttpRequest"),t.headers["Content-Type"]=t.contentType;for(var l in t.headers)r.setRequestHeader(l,t.headers[l]);return r.setRequestHeader("Accept",t.accepts[h]?t.accepts[h]+", */*; q=0.01":t.accepts._default),r.send(c),r}}var r=/^https?:\/\//,o={},h=function(t,e,i){var n=new Image;n.addEventListener("load",function t(){e&&e(n),this.removeEventListener("load",t,!1)},!1),n.addEventListener("error",function e(){i&&i(),console.error("fail load:"+t),this.removeEventListener("error",e,!1)},!1),n.src=t},a=EC.Event.extend({initialize:function(t){var e=this;return a.superclass.initialize.call(this),h(t,function(t){e.dispatch("success",t)},function(t){e.dispatch("error",t)}),this}}),u=function(e,i){var n=r.test(e.url)?e.url:t.baseUrl+e.url;h(n,function(t){o[e.name]={width:t.width,height:t.height,texture:t},EC.extend(o[e.name],e),EC.isFunction(i)&&i(e)})},c=function(t,e,i){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.src=t,s.onload=s.onreadystatechange=function(){s.onload=s.onreadystatechange=new Function,this.readyState&&!/loaded|complete/.test(this.readyState)||(s.parentNode.removeChild(s),"function"==typeof e&&e(s))},s.onerror=function(){s.onerror=new Function,"function"==typeof i&&i(null,404,"not found")},n.insertBefore(s,n.firstChild)},l=EC.Event.extend({initialize:function(t){var e=this;return l.superclass.initialize.call(this),c(t,function(t){e.dispatch("success",t)},function(t){e.dispatch("error",t)}),this}}),d=function(t,e,i){var n=/callback=([^&]+)/.exec(t);return n?(n=n[1],"?"==n&&(n="jsonp"+(Date.now()+1e18*Math.random()),t=t.replace("callback=?","callback="+n)),window[n]=function(t){e(t),delete window[n]},void c(t,null,i)):c(t,null,i)},f=EC.Event.extend({initialize:function(t){var e=this;return f.superclass.initialize.call(this),d(t,function(t){e.dispatch("success",t)},function(t){e.dispatch("error",t)}),this}}),p={url:"",type:"GET",async:!0,data:{},headers:{},cache:!0,cors:!1,beforeSend:EC.noop,success:EC.noop,error:EC.noop,complete:EC.noop,timeout:0,context:null,dataType:"text",callbackName:"?",contentType:"application/x-www-form-urlencoded;charset=UTF-8",createXHR:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHttp")}catch(t){return null}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},g=EC.Event.extend({initialize:function(t){var e=this;g.superclass.initialize.call(this);var i=t.success,n=t.error,r=t.complete;return t.success=function(){var t=[].slice.call(arguments);i&&i.apply(e,t),e.dispatch.apply(e,["success"].concat(t))},t.error=function(){var t=[].slice.call(arguments);n&&n.apply(e,t),e.dispatch.apply(e,["error"].concat(t))},t.complete=function(){var t=[].slice.call(arguments);r&&r.apply(e,t),e.dispatch.apply(e,["complete"].concat(t))},s(t),this},then:function(t,e){return t&&this.on("success",t),e&&this.on("error",e),this},always:function(t){return t&&this.on("complete",t),this}}),m=function(e,i,n){return e=r.test(e)?e:t.baseUrl+e,s({url:e,dataType:"json",success:i,error:function(){n.apply(null,arguments),console.error("fail load:"+e)}})},v=function(t,e){"object"==typeof t&&("image"==t.type?u(t,function(){e&&e(t)}):/^(?:json|sheet|font)$/.test(t.type)?m(t.url,function(i){var n=EC.extend({},t,{data:i});if(o[t.name]=n,"sheet"==t.type||"font"==t.type){var s=t.url.substr(0,t.url.lastIndexOf("/")+1)+i.file,r=i.file.replace(/\.(\w+)$/,"_$1"),h=EC.extend({},t,{url:s,name:r,type:"image"});u(h,function(){e&&e(n)})}else e&&e(n)}):(o[t.name]=t,e&&e(t)))},w=function(){return o},y=function(t,e){var i=/\[(\d+\-\d+)\]/,n=i.exec(t);if(n){for(var s=[],r=RegExp.$1.split("-"),h=t.replace(i,"").split("_"),a=Number(r[0]);a<Number(r[1])+1;a++){var u=h[0]+a+"_"+h[1];s.push(o[u])}return s}var c=o[t];if(void 0===c)return console.error(t+" does not exist!");if("json"==c.type||"sheet"==c.type){if(e){var l={},d=c.data.frames[e];return l.width=d.w,l.height=d.h,l.sx=d.x,l.sy=d.y,l.swidth=d.w,l.sheight=d.h,l.texture=c.texture,l}return c.data}return c},x=function(t){var e=y(t);return e?e.texture:null},_=function(t,e){if("string"!=typeof t)return t;if(!/^(#|\.)/.test(t))return null;var i=t.charAt(0);if(e=e||document,"#"==i)return document.getElementById(t.substr(1,t.length));if(document.querySelectorAll)return e.querySelectorAll(t);try{return e.getElementsByClassName(t)}catch(i){var n=[],s=e.getElementsByTagName("*");return s.forEach(function(e){(" "+e.className+" ").indexOf(" "+t+" ")>-1&&n.push(e)}),n}},b=function(t,e){var i=e.groups.find(function(e){return e.name==t});if(void 0===i)return console.error('group "'+t+'" dose not exsit!');var n=i.keys.split(",").map(function(t){return t.trim()});return n},T=function(t,e){var i=[];return t.forEach(function(t){e.indexOf(t.name)>-1&&i.push(t)}),i},E=EC.Event.extend({initialize:function(t,e){var i=b(t,e);if(void 0!==i){var n=T(e.resources,i),s=this,r=0,o=n.length;return E.superclass.initialize.call(this),n.forEach(function(t){v(t,function(){s.dispatch("progress",++r,o,t),r>o-1&&s.dispatch("complete")})}),this}}});EC.extend(t,{loadImage:function(t){return new a(t)},ajaxSetup:e,ajax:function(t){return s(t)},request:function(t){return new g(t)},loadScript:function(t){return new l(t)},loadJson:function(t){return new g({url:t,dataType:"json"})},loadJsonp:function(t){return new f(t)},loadGroup:function(t,e){return new E(t,e)},getAsset:w,getRes:y,getTexture:x,el:_,baseUrl:"images/"}),["get","post","getJSON"].forEach(function(e,i){t.request[e]=function(t,n){return e=e.replace(/JSON?$/,""),new g({url:t,type:e,data:n,dataType:2==i?"json":"text"})}})}(window.RES||(window.RES={}));var requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){return clearTimeout(t)};!function(t){"use strict";var e=t.Event.extend({initialize:function(){e.superclass.initialize.call(this),this.ticker=null},start:function(){var t=this;return+function e(){t.ticker=requestAnimationFrame(e),t.dispatch("ticker")}(),this},stop:function(){return this.ticker&&(cancelAnimationFrame(this.ticker),delete this.ticker),this}});t.provide({Ticker:e})}(window.EC),function(t){"use strict";var e=t.Event.extend({initialize:function(i,n){e.superclass.initialize.call(this),this._currentCount=0,this._lastTime=0,this._repeatCount=n,this._waitTime=0,this._ticker=new t.Ticker,this.delay=i,this._initEvents()},start:function(){return this._lastTime=Date.now(),this._ticker.start(),this},stop:function(){if(this._ticker)if(this._ticker.stop(),this._waitTime>0){var t=this;setTimeout(function(){t.dispatch("complete"),t.reset()},this._waitTime)}else this.dispatch("complete"),this.reset();return this},wait:function(t){return this._waitTime=t,this},pause:function(t){if(this._ticker&&(this._ticker.stop(),this.dispatch("pause")),"number"==typeof t&&t>0){var e=this;setTimeout(function(){e._ticker.start()},t)}return this},setRepeatCount:function(t){return this._repeatCount=t,this},_timerHandle:function(){var t=Date.now();if(t-this._lastTime>=this.delay){if(this._repeatCount&&++this._currentCount==this._repeatCount)return void this.stop();this._lastTime=t,this.dispatch("timer",t)}},_initEvents:function(){this._ticker.on("ticker",this._timerHandle,this)},reset:function(){return this._currentCount=0,this._ticker=null,this}});t.provide({Timer:e})}(window.EC),function(t){"use strict";var e={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-e.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*e.Bounce.In(2*t):.5*e.Bounce.Out(2*t-1)+.5}}};t.provide({Easing:e})}(window.EC),function(t){"use strict";var e=function(e,i){this.tweenObj=e,this._updateCb=[],this._completeCb=[],this.cfg=i||{},this._repeatIndex=0,this._repeatCount=0,this.cfg.reverse&&(this._repeatCount=2),this.cfg.loop&&(t.isNumber(this.cfg.loop)?this._repeatCount=this.cfg.loop:this._repeatCount=-1)};e.cache={},e.timerCache={},e.uuid=0,e.expando="@Tween-"+ +new Date,e.get=function(t,i){return new e(t,i)},e.removeTweens=function(t){return t&&t[e.expando]&&e.timerCache[t[e.expando]]&&e.get(t).stop(),this},e.removeAllTweens=function(t){return t.getChilds().forEach(function(t){e.removeTweens(t)}),this},e.prototype={to:function(){var t=this,e=arguments;return this.queue(function(){t.anim.apply(t,e)}),this},wait:function(e){return t.isNumber(e)&&this.queue(e),this},anim:function(i,n,s){var r,o=this,h=+new Date,a=e.timerCache[o.tweenObj[e.expando]];if(this.duration=n||600,this.easing=s||t.Easing.Linear.None,this.startAttrs=t.extend({},this.tweenObj),this.endAttrs=i,a)return this;var u=function(){r=(+new Date-h)/o.duration,r=r>=1?1:r,o.percent=r,a=requestAnimationFrame(u),e.timerCache[o.tweenObj[e.expando]]=a,o.update(o.tweenObj),1==r&&(o.stop(),o.dequeue())};return u(),this},update:function(t){for(var e in this.endAttrs)this.endAttrs[e]!=this.startAttrs[e]&&(t[e]=this.startAttrs[e]+(this.endAttrs[e]-this.startAttrs[e])*this.easing(this.percent));this._triggerUpdate(this.tweenObj)},stop:function(){return cancelAnimationFrame(e.timerCache[this.tweenObj[e.expando]]),delete e.timerCache[this.tweenObj[e.expando]],this},onUpdate:function(e,i){var n=this;return this._updateCb.push(function(){t.isFunction(e)&&e.apply(i||n,arguments)}),this},call:function(e,i){var n=this;return this._completeCb.push(function(){t.isFunction(e)&&e.apply(i||n,arguments)}),this},_triggerUpdate:function(t){this._updateCb.forEach(function(e){e(t)})},_triggerComplete:function(t){this._completeCb.forEach(function(e){e(t)})},queue:function(t){this.tweenObj[e.expando]||(this.tweenObj[e.expando]=++e.uuid);var i=e.cache[e.uuid];return void 0===i&&(i=e.cache[e.uuid]=[]),t&&i.push(t),"running"!==i[0]&&this.dequeue(),this},dequeue:function(){var i,n=this,s=e.cache[this.tweenObj[e.expando]]||[],r=s.shift();return"running"===r&&(r=s.shift()),r&&(s.unshift("running"),t.isNumber(r)?i=window.setTimeout(function(){window.clearTimeout(i),i=null,n.dequeue()},r):t.isFunction(r)&&r.call(n.tweenObj,function(){n.dequeue()})),s.length||(this._repeatCount==-1||++this._repeatIndex<this._repeatCount?this.to(this.startAttrs,this.duration,this.easing):delete e.cache[this.tweenObj[e.expando]],this._triggerComplete(this.tweenObj)),this},clearQueue:function(){return delete e.cache[this.tweenObj[e.expando]],this}},t.provide({Tween:e})}(window.EC),+function(t,e){"use strict";function i(t,i){if(i.sx!==e){var n=t.canvas.width,s=t.canvas.height,r=i.swidth,o=i.sheight;r>=n&&(r=n-1),o>=s&&(o=s-1),t.drawImage(i.texture,i.sx,i.sy,r,o,0,0,i.width,i.height)}else t.drawImage(i.texture,0,0,i.width,i.height)}function n(e){var i,n,s=e.fontData.frames,r=e.fontTexture,o=0,h=0,a=e.width,u=e.x;e._children=[],e.text.split("").forEach(function(a){i=s[a],n=new k,t.extend(n,{texture:r,width:i.w,height:i.h,sx:i.x,sy:i.y,x:o+=h+e.letterSpacing,swidth:i.w,sheight:i.h}),h=i.w,e.addChild(n)}),"center"==e.textAlign?e.x=u+a/2-e.width/2:"right"==e.textAlign&&(e.x=u+a-e.width)}function s(t,e){n(e),e.getChilds().forEach(function(e){t.save(),c(t,e),i(t,e),t.restore()})}function r(t,e){t.font=e.font||e.textStyle+" "+e.textWeight+" "+e.size+"px/"+e.lineHeight+"px "+e.textFamily,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline||"top";var i="center"==e.textAlign?e.width/2:"right"==e.textAlign?e.width:0,n=0;e.strokeOnly||(t.fillStyle=e.textColor,e.multiple?h(t,"fillText",e.text,e.width,i,n,e.lineHeight):o(t,"fillText",e.text,i,n,e.lineHeight)),(e.stroke||e.strokeOnly)&&(t.strokeStyle=e.strokeColor,e.multiple?h(t,"strokeText",e.text,e.width,i,n,e.lineHeight):o(t,"strokeText",e.text,i,n,e.lineHeight))}function o(t,e,i,n,s,r){i.split(/\n/).forEach(function(i,o){t[e](i,n,s+r*o)})}function h(t,e,i,n,s,r,o){for(var h=0,a=0,u=0;u<i.length;u++)h+=t.measureText(i[u]).width,h>n-s&&(t[e](i.substring(a,u),s,r),r+=o,h=0,a=u),u==i.length-1&&t[e](i.substring(a,u+1),s,r)}function a(t){T.font=t.size+"px "+t.textFamily,t.width=T.measureText(t.text).width,t.height=t.size+4}function u(t,e){t.beginPath(),l(t,e),e.draw(t)}function c(e,i){var n=i.parent,s=i.moveX*(i.anchorX>0?1:0),r=i.moveY*(i.anchorY>0?1:0),o=i.anchorX*i.width,h=i.anchorY*i.height;i=i||{},t.isNumber(i.alpha)&&(e.globalAlpha=i.alpha),e.transform(i.scaleX,i.skewX,i.skewY,i.scaleY,i.x+s+o-(i.isMasker?0:n.mask?n.mask.x:0),i.y+r+h-(i.isMasker?0:n.mask?n.mask.y:0)),e.rotate(i.rotation*_),e.translate(-s-o,-r-h)}function l(t,e){t.fillStyle=e.fillStyle,t.strokeStyle=e.strokeStyle,t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowBlur||0,t.shadowOffsetX=e.shadowOffsetX||0,t.shadowOffsetY=e.shadowOffsetY||0,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth||0,t.miterLimit=e.miterLimit}function d(t){return Math.min.apply(Math,t)}function f(t){return Math.max.apply(Math,t)}function p(t){var e=[],i=[];return t.forEach(function(t){e.push(t[0]),i.push(t[1])}),{width:f(e)-d(e),height:f(i)-d(i)}}function g(t){var e=[],i=[];return t.forEach(function(t,n){n%2===0?e.push(t):i.push(t)}),{width:f(e)-d(e),height:f(i)-d(i)}}function m(t,e){for(var i=t.x+(e?t.moveX:0),n=t.y+(e?t.moveY:0),s=t.parent;s;)i+=s.x+(e?s.moveX:0),n+=s.y+(e?s.moveY:0),s=s.parent;return{x:i,y:n}}function v(t,e,i,n,s){return t.x>=n&&t.x<=e+n&&t.y>=s&&t.y<=i+s}function w(t,e){var i=m(e);if("Shape"==e.$type){var n=e.renderContext;return n.save(),n.translate(i.x,i.y),n.beginPath(),E[e.drawType](n,e),n.restore(),n.isPointInPath(t.x,t.y)}return v(t,e.width,e.height,i.x,i.y)}function y(t){var e=m(t,!0);this.x=e.x,this.y=e.y,this.width=t.width,this.height=t.height}var x=Math.PI,_=x/180,b=Array.prototype.slice,T=document.createElement("canvas").getContext("2d");y.prototype={intersects:function(t){return t.x<=this.x+this.width&&t.x+t.width>=this.x&&t.y<=this.y+this.height&&t.y+t.height>=this.y}};var E={rect:function(t,e){t.rect(e.moveX,e.moveY,e.width,e.height)},arc:function(t,e){t.arc(e.radius+e.moveX,e.radius+e.moveY,e.radius,e.startAngle*x,e.endAngle*x,e.counterclockwise)},arcTo:function(t,e){t.moveTo(e.moveX,e.moveY),t.arcTo(e.startX,e.startY,e.endX,e.endY,e.radius)},roundRect:function(t,e){t.roundRect(e.moveX,e.moveY,e.width,e.height,e.radius)},lineTo:function(t,e){t.moveTo(e.moveX,e.moveY),e.coords.forEach(function(e){t.lineTo.apply(t,e)})},line:function(t,e){t.moveTo(e.moveX,e.moveY),t.lineTo(e.endX,e.endY)},dashedLine:function(t,e){t.dashedLine(e.moveX,e.moveY,e.endX,e.endY,e.dashLength)},ellipse:function(t,e){t.ellipse(e.width/2+e.moveX,e.height/2+e.moveY,e.width,e.height)},clip:function(t){t.clip()},quadraticCurveTo:function(t,e){t.moveTo(e.moveX,e.moveY),t.quadraticCurveTo.apply(t,e.coords)},bezierCurveTo:function(t,e){t.moveTo(e.moveX,e.moveY),t.bezierCurveTo.apply(t,e.coords)}},S=t.Event.extend({initialize:function(){S.superclass.initialize.call(this),this.x=0,this.y=0,this.width=0,this.height=0,this.visible=!0,this.alpha=e,this.scaleX=1,this.scaleY=1,this.rotation=0,this.skewX=0,this.skewY=0,this.anchorX=0,this.anchorY=0,this.moveX=0,this.moveY=0,this.cursor="pointer",this.$type="ObjectContainer",this._children=[],this.numChildren=0},addChild:function(e,i){if(!t.isObject(e))throw new Error(String(e)+"is not a instance of EC");return e.parent=this,t.isNumber(i)?this._children.splice(i,0,e):this._children.push(e),this.numChildren=this._children.length,this},removeChild:function(t){return this.getChilds().splice(this.getChildIndex(t),1),this.numChildren=this._children.length,this._stopTweens(t),this._triggerRemove(t),this},_triggerRemove:function(t){var e=function(t){t.dispatch("remove",t),"Sprite"==t.$type&&t.getChilds().forEach(e)};t.dispatch("remove",t),t.getChilds().forEach(e)},removeAllChildren:function(){return this._stopAllTweens(),this._children=[],this.numChildren=0,this},getChilds:function(){return this._children},getBounds:function(){return new y(this)},getChildIndex:function(t){return this.getChilds().indexOf(t)},setChildIndex:function(t,e){return this.removeChild(t),this._children.splice(e,0,t),this},setParams:function(e){if(t.isObject(e))for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);return this},transform:function(t,e,i,n,s,r){return this.x=s,this.y=r,this.scaleX=t,this.scaleY=n,this.skewX=e,this.skewY=i,this},setTransform:function(t,e,i,n,s,r){return this.x=s,this.y=r,this.rotation=t,this.scaleY=n,this.skewX=e,this.skewY=i,this},_stopTweens:function(e){t.Tween.removeTweens(e)},_stopAllTweens:function(){t.Tween.removeAllTweens(this)}}),C=S.extend({initialize:function(t,e,i,n,s,r,o,h,u){C.superclass.initialize.call(this),this.text=t||"",this.size=e||16,this.textAlign=r||"start",this.textBaseline="",this.textFamily=o||"Microsoft yahei,Arial,sans-serif",this.textColor=s||"#000",this.strokeColor=s||"#000",this.textStyle="normal",this.textWeight="normal",this.lineHeight=20,this.stroke=!1,this.strokeOnly=!1,this.multiple=!1,this.x=i||0,this.y=n||0,this.width=h||0,this.height=u||0,a(this),this.$type="TextField"}}),k=S.extend({initialize:function(e,i,n,s,r,o,h,a,u){k.superclass.initialize.call(this),this.x=i||0,this.y=n||0,t.isDefined(o)&&(this.sx=o),t.isDefined(h)&&(this.sy=h),t.isDefined(a)&&(this.swidth=a||.1),t.isDefined(u)&&(this.sheight=u||.1),this.$type="BitMap",t.isDefined(e)&&t.extend(this,t.isObject(e)?"IMG"===e.nodeName?{texture:e,width:e.width,height:e.height}:e:RES.getRes(e)),t.isDefined(s)&&(this.width=s),t.isDefined(r)&&(this.height=r)},setTexture:function(e){if(!t.isObject(e))throw new Error(String(e)+"is a invalid texture");return"nodeType"in e?this.texture=e:t.extend(this,e),this}}),F=S.extend({initialize:function(t,e,i,n){F.superclass.initialize.call(this),this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.radius=0,this._fill=!1,this._stroke=!1,this._closePath=!1,
this.$type="Shape"},_setStyle:function(e,i,n,s,r,o,h){"number"==typeof n&&n<1?this[e]=t.Util.color.toRgb(i,n):this[e]=i,this.shadowColor=s||0,this.shadowBlur=r||0,this.shadowOffsetX=o||0,this.shadowOffsetY=h||0},fill:function(){var t=b.call(arguments);t.unshift("fillStyle"),this._fill=!0,this._setStyle.apply(this,t)},stroke:function(){var t=b.call(arguments);t.unshift("strokeStyle"),this._stroke=!0,this._setStyle.apply(this,t)},draw:function(t){E[this.drawType](t,this),this._closePath&&t.closePath(),this._fill&&t.fill(),this._stroke&&t.stroke()},close:function(){this._closePath=!0}});t.extend(F.prototype,{rect:function(t,e,i,n){return this.moveX=t,this.moveY=e,this.width=i,this.height=n,this.drawType="rect",this},arc:function(t,e,i,n,s,r){return this.moveX=t,this.moveY=e,this.radius=i,this.startAngle=n,this.endAngle=s,this.counterclockwise=r,this.width=2*this.radius,this.height=2*this.radius,this.drawType="arc",this},arcTo:function(t,e,i,n,s){return this.startX=t,this.startY=e,this.endX=i,this.endY=n,this.radius=s,this.width=t-e,this.height=s,this.drawType="arcTo",this},roundRect:function(t,e,i,n,s){return this.moveX=t,this.moveY=e,this.width=i,this.height=n,this.radius=s,this.drawType="roundRect",this},moveTo:function(t,e){return this.moveX=t,this.moveY=e,this},lineTo:function(){this.coords=b.call(arguments);var t=p(this.coords);return this.width=t.width,this.height=t.height,this.drawType="lineTo",this},line:function(t,e,i,n){return this.moveX=t,this.moveY=e,this.endX=i,this.endY=n,this.width=i-t,this.height=this.lineWidth,this.drawType="line",this},dashedLine:function(t,e,i,n,s){return this.moveX=t,this.moveY=e,this.endX=i,this.endY=n,this.dashLength=s,this.width=i-t,this.height=this.lineWidth,this.drawType="dashedLine",this},ellipse:function(t,e,i,n){return this.moveX=t,this.moveY=e,this.width=i,this.height=n,this.drawType="ellipse",this},clip:function(){return this.drawType="clip",this},quadraticCurveTo:function(){this.coords=b.call(arguments);var t=g([this.moveX,this.moveY].concat(this.coords));return this.width=t.width,this.height=t.height,this.drawType="quadraticCurveTo",this},bezierCurveTo:function(){this.coords=b.call(arguments);var t=g([this.moveX,this.moveY].concat(this.coords));return this.width=t.width,this.height=t.height,this.drawType="bezierCurveTo",this}}),t.extend(CanvasRenderingContext2D.prototype,{roundRect:function(t,e,i,n,s){return i<2*s&&(s=i/2),n<2*s&&(s=n/2),this.moveTo(t+s,e),this.arcTo(t+i,e,t+i,e+n,s),this.arcTo(t+i,e+n,t,e+n,s),this.arcTo(t,e+n,t,e,s),this.arcTo(t,e,t+i,e,s),this.closePath(),this},dashedLine:function(t,i,n,s,r){for(var o=r===e?5:r,h=n-t,a=s-i,u=Math.floor(Math.sqrt(h*h+a*a)/o),c=0;c<u;c++)c%2===0?this.moveTo(t+h/u*c,i+a/u*c):this.lineTo(t+h/u*c,i+a/u*c);return this},ellipse:function(t,e,i,n){var s=i/.75/2,r=n/2;return this.moveTo(t,e-r),this.bezierCurveTo(t+s,e-r,t+s,e+r,t,e+r),this.bezierCurveTo(t-s,e+r,t-s,e-r,t,e-r),this.closePath(),this}});var A=F.extend({initialize:function(){A.superclass.initialize.apply(this,arguments),this.isMasker=!0},draw:function(t){A.superclass.draw.call(this,t),t.clip()}}),R=S.extend({initialize:function(t,e,i,n){R.superclass.initialize.call(this),this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.$type="Sprite"},addChild:function(t){t.renderContext=this.renderContext,t.stage=this.stage,this._addMask(),R.superclass.addChild.apply(this,arguments);var e=t.x+t.moveX,i=t.y+t.moveY,n=(t.lineWidth||0)/2,s=t.width+n,r=t.height+n;return 1==this.getChilds().length?(0==this.width?this.width=e+s:this._isWidthDefined=!0,0==this.height?this.height=i+r:this._isHeightDefined=!0):(!this._isWidthDefined&&e+s>this.width&&(this.width=e+s),!this._isHeightDefined&&i+r>this.height&&(this.height=i+r)),this},_addMask:function(){if(this.mask&&!this._isMaskAdded){if(!(this.mask instanceof t.Masker))throw new Error("mask must be a instance of EC.Masker");R.superclass.addChild.call(this,this.mask,0),this._isMaskAdded=!0}}}),O=R.extend({initialize:function(){O.superclass.initialize.apply(this,arguments),this.width=400,this.height=64,this.backgroundAlpha=1,this.backgroundColor="",this.backgroundImage="",this.backgroundRepeat="repeat",this.borderAlpha=1,this.borderColor="#000",this.borderRadius=0,this.borderWidth=2,this.padding=3,this.fontSize=28,this.color="#000",this.placeholderColor="#999",this.placeholder="",this.fontFamily="",this.lineHeight=20,this.inputType="text",this.on("addToStage",function(){this._create(),this._events()},this),this.on("remove",function(){this.inputText.parentNode.removeChild(this.inputText),window.removeEventListener(t.EVENTS.RESIZE,this.resizeListener,!1)},this)},_create:function(){var e=this.padding;this.touchEnabled=!0,this.padding=t.isArray(e)?e:[e,e,e,e],this.input=new F,this.textField=new C,this.inputText=document.createElement("textarea"==this.inputType?"textarea":"input"),this.input.x=this.borderWidth/2,this.input.y=this.borderWidth/2,this.input.lineWidth=this.borderWidth,this.input.stroke(this.borderColor,this.borderAlpha);var i=this.backgroundImage;if(t.isObject(i)){var n=this.renderContext.createPattern("IMG"===i.nodeName?i:i.texture,this.backgroundRepeat);this.input.fill(n)}else this.backgroundColor&&this.input.fill(this.backgroundColor,this.backgroundAlpha);this.borderRadius>0?this.input.roundRect(0,0,this.width,this.height,this.borderRadius):this.input.rect(0,0,this.width,this.height),"textarea"!=this.inputType&&(this.inputText.type=this.inputType),this.placeholder&&(this.inputText.setAttribute("placeholder",this.placeholder),this.textField.text=this.placeholder,this.textField.textColor=this.placeholderColor),this.textField.width=this.width-this.padding[1]-this.padding[3],this.textField.multiple=!0,this.textField.lineHeight="textarea"!=this.inputType?this.height:this.lineHeight,this.textField.size=this.fontSize,this.textField.textFamily=this.fontFamily||this.textField.textFamily,this.textField.x=this.borderWidth+this.padding[3],this.textField.y="textarea"==this.inputType?this.padding[0]:(this.height-this.textField.height+this.borderWidth)/2,this._setInputStyle(),this.mask=new A,this.mask.rect(0,0,this.width+this.borderWidth,this.height+this.borderWidth),this.addChild(this.input),this.addChild(this.textField),document.body.appendChild(this.inputText)},_setInputStyle:function(){var t=this,e=1/this.stage.scaleRatio,i="textarea"!=this.inputType?this.height:this.lineHeight;this.inputText.style.cssText="display:none;position:absolute;border:none;background:none;outline:none;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-text-size-adjust:none;text-size-adjust:none;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;resize:none;left:"+(this.x+this.input.x)*e+"px;top:"+(this.y+this.input.y)*e+"px;width:"+this.width*e+"px;height:"+this.height*e+"px;line-height:"+i*e+"px;font-size:"+this.fontSize*e+"px;font-family:"+(this.fontFamily||this.textField.textFamily)+";color:"+this.color+";padding:"+this.padding.map(function(i){return i+t.borderWidth/2*e+"px"}).join(" ")},_events:function(){this.on("touch",function(){this.textField.visible=!1,this.inputText.style.display="block",this.inputText.focus()},this),this.inputText.addEventListener("focus",function(t){this.dispatch("focus",{target:this,originalEvent:t,value:this.inputText.value})}.bind(this),!1),this.inputText.addEventListener("change",function(t){this.dispatch("change",{target:this,originalEvent:t,value:this.inputText.value})}.bind(this),!1),this.inputText.addEventListener("blur",function(t){var e=this.inputText.value;this.textField.text=e||this.placeholder,this.textField.textColor=e?this.color:this.placeholderColor,this.textField.visible=!0,this.inputText.style.display="none",this.dispatch("blur",{target:this,originalEvent:t,value:e})}.bind(this),!1),this.inputText.addEventListener("input",function(t){this.dispatch("input",{target:this,originalEvent:t,value:this.inputText.value})}.bind(this),!1),window.addEventListener(t.EVENTS.RESIZE,this.resizeListener=function(){this._setInputStyle()}.bind(this),!1)}}),M=R.extend({initialize:function(){M.superclass.initialize.apply(this,arguments),this.text="",this.font="",this.textAlign="left",this.letterSpacing=0,this.$type="BitMapText",this.on("addToStage",function(){this._create()},this)},_create:function(){this.fontData=(t.isString(this.font)?RES.getRes(this.font+"_fnt"):this.font).data,this.fontTexture=RES.getRes(this.fontData.file.replace(/\.(\w+)$/,"_$1")).texture}}),P=R.extend({initialize:function(e){P.superclass.initialize.call(this);var i={x:0,y:0,size:16,textColor:"#000",alpha:1},n=t.extend({},i,this._getConfig(e.normal)||{}),s=t.extend({},i,this._getConfig(e.hover)||{}),r=t.extend({},i,this._getConfig(e.active)||{});this.statusCfg={normal:n,hover:s,active:r};for(var o in this.statusCfg)t.isString(this.statusCfg[o].texture)&&t.extend(this.statusCfg[o],RES.getRes(this.statusCfg[o].texture));this.bitMap=new k,this.shape=new F,this.textField=new C,this.touchEnabled=!0,this.on("addToStage",function(){this._create(),this._events()},this)},_create:function(){this.setButton("normal"),this.addChild(this.bitMap),this.addChild(this.shape),this.addChild(this.textField)},_getConfig:function(e){return t.isString(e)?RES.getRes(e):e},setButton:function(e){var i=this.statusCfg[e];if(i=t.extend({},this.statusCfg.normal,i),t.extend(this,{width:i.width,height:i.height}),i.texture?(t.extend(this.bitMap,{x:i.x,y:i.y,alpha:i.alpha,texture:i.texture,width:i.width,height:i.height}),this.bitMap.visible=!0):this.bitMap.visible=!1,i.fillStyle||i.strokeStyle?(t.extend(this.shape,i),i.radius&&i.radius>0?this.shape.roundRect(0,0,i.width,i.height,i.radius):this.shape.rect(0,0,i.width,i.height),i.fillStyle&&this.shape.fill(i.fillStyle),i.strokeStyle&&this.shape.stroke(i.strokeStyle),this.shape.visible=!0):this.shape.visible=!1,i.text){var n={textAlign:"center",y:i.y+(this.height-this.textField.height)/2,height:this.textField.height};t.extend(this.textField,t.extend({},i,n)),this.textField.visible=!0}else this.textField.visible=!1;return i},_events:function(){this.on("touchstart",function(){this.setButton("active")},this),this.on("touchend",function(){this.setButton("normal")},this),t.isTouch||(this.on("touchenter",function(){this.setButton("hover")},this),this.on("touchout",function(){this.setButton("normal")},this))}}),j=t.Event.extend({initialize:function(t,e){j.superclass.initialize.call(this),this.x=t||0,this.y=e||0},set:function(t,e){this.x=t,this.y=e}}),X=S.extend({initialize:function(e,i){X.superclass.initialize.call(this),this.canvas=e,this.renderContext=this.canvas.getContext("2d"),this.compositeOperation="source-over",this.$type="Stage",this.options=t.extend({},{showFps:!1,scaleMode:"showAll",width:window.innerWidth,height:window.innerHeight},i||{}),this.width=parseFloat(this.canvas.getAttribute("width"))||this.options.width,this.height=parseFloat(this.canvas.getAttribute("height"))||this.options.height,this.scaleRatio=1,this._isRendering=!1,this._ticker=new t.Ticker,this.canvas.width=this.width,this.canvas.height=this.height,"noScale"!==this.options.scaleMode&&this.setAdapter(),this.options.showFps&&(this.createFps(),this.showFps()),this._initEvents(),this.start()},addChild:function(e){if(!t.isObject(e))throw new Error(String(e)+"is not a instance of EC");return X.superclass.addChild.apply(this,arguments),this._triggerAddToStage(e),this},render:function(){var t=this,e=this.renderContext,i=function(n){n.visible&&("Sprite"==n.$type?(e.save(),c(e,n),n.getChilds().forEach(function(t){i(t)}),e.restore()):t._renderItem(n,e))};return e.globalCompositeOperation=this.compositeOperation,this._children.forEach(i),this},_renderItem:function(t,e){switch(t.isMasker||e.save(),c(e,t),t.$type){case"BitMap":i(e,t);break;case"BitMapText":s(e,t);break;case"TextField":r(e,t);break;case"Shape":u(e,t)}t.isMasker||e.restore()},clear:function(){return this.renderContext.clearRect(0,0,this.width,this.height),this},start:function(){if(!this._isRendering)return this._isRendering=!0,this._ticker.start(),this},stop:function(){return this._ticker.stop(),this.dispatch("stop"),this._isRendering=!1,this},_triggerAddToStage:function(t){var e=this,i=function(t){t.renderContext=e.renderContext,t.stage=e,t.dispatch("addToStage",t),"Sprite"==t.$type&&t.getChilds().forEach(i)};t.renderContext=e.renderContext,t.stage=e,t.dispatch("addToStage",t),t.getChilds().forEach(i)},_triggerEnterFrame:function(){var t=function(e){e.dispatch("enterframe",e),"Sprite"==e.$type&&e.getChilds().forEach(t)};this.getChilds().forEach(t)},setAdapter:function(){var e=this.canvas.parentNode,i="BODY"==e.nodeName?window.innerWidth:e.offsetWidth-parseFloat(t.getStyle(e,"padding-left"))-parseFloat(t.getStyle(e,"padding-right")),n="BODY"==e.nodeName?window.innerHeight:e.offsetHeight-parseFloat(t.getStyle(e,"padding-top"))-parseFloat(t.getStyle(e,"padding-bottom")),s=i,r=this.height/this.width*s;switch(this.options.scaleMode){case"showAll":r>n&&(r=n,s=this.width/this.height*r);break;case"fixedWidth":}return this.canvas.style.width=s+"px",this.canvas.style.height=r+"px",this.scaleRatio=this.width/s,this},_initEvents:function(){var e=this.options.showFps;this._ticker.on("ticker",function(){e&&this.FPS.begin(),this.clear(),this.render(),this.dispatch("enterframe"),e&&this.FPS.end()},this),this.on("enterframe",this._triggerEnterFrame,this),"noScale"!==this.options.scaleMode&&window.addEventListener(t.EVENTS.RESIZE,function(){this.setAdapter()}.bind(this),!1),(new t.TouchEvent).attach(this)},createFps:function(){this.FPS=new Stats},showFps:function(e){t.isObject(e)&&(this.FPS.dom.style.left=t.isDefined(e.left)?t.isNumber(e.left)?e.left+"px":e.left:"",this.FPS.dom.style.right=t.isDefined(e.right)?t.isNumber(e.right)?e.right+"px":e.right:"",this.FPS.dom.style.top=t.isDefined(e.top)?t.isNumber(e.top)?e.top+"px":e.top:"",this.FPS.dom.style.bottom=t.isDefined(e.bottom)?t.isNumber(e.bottom)?e.bottom+"px":e.bottom:""),this._fpsDom||document.body.appendChild(this._fpsDom=this.FPS.dom)}});["createLinearGradient","createPattern","createRadialGradient","addColorStop","createImageData","putImageData","getImageData","isPointInPath"].forEach(function(t){X.prototype[t]=function(){return this.renderContext[t].apply(this,arguments)}}),t.provide({TextField:C,BitMap:k,BitMapText:M,Shape:F,TextInput:O,Masker:A,DisplayObjectContainer:S,Sprite:R,Button:P,Point:j,Stage:X,isPointInPath:w})}(window.EC),function(t,e){"use strict";var i=t.Sprite.extend({initialize:function(e,n,s){if(i.superclass.initialize.call(this),this._startFrame=0,this._startTime=0,this._playTimes=-1,this._resKey=s,this.currentFrame=0,this.isPlaying=!1,this.setRES(e,n),this._clip=new t.BitMap(this.RESUrl),Array.isArray(this.RESUrl))this.width=this.RESUrl[0].width,this.height=this.RESUrl[0].height,this.totalFrames=this.RESUrl.length,this.setFrame=this.setFrameByPath;else{var r=this.RES.mc[s].frames[0].res,o=this.RES.res[r];this.width=o.w,this.height=o.h,this.setFrame=this.setFrameBySprite}this._timer=new t.Timer(this.frameRate,this._repeatCount),this._initEvents()},setRES:function(e,i,r){this.RESUrl=n(e),this.RES=s(i,this._resKey),this.currentFrame=0,this.frame=this.getMovieClipData(this._resKey),this.frameRate=Math.round(1e3/(this.frame.frameRate||24)),this.totalFrames=this.frame.frames.length,Array.isArray(this.RESUrl)?this.texture=this.RESUrl[this.currentFrame].texture:(t.isObject(this.RESUrl)&&"nodeType"in this.RESUrl&&(this.RESUrl={texture:this.RESUrl,width:this.RESUrl.width,height:this.RESUrl.height}),this.texture=this.RESUrl.texture),r&&this.setFrameRate(r)},getMovieClipData:function(t){return this.RES.mc[t]||[]},gotoAndPlay:function(t,e,i){return t=Math.max(0,t-1),this._startFrame=t,this._playTimes=e,this.currentFrame=t,this._playTimes>0&&(this._repeatCount=this._playTimes*this.totalFrames,this._timer.setRepeatCount(this._repeatCount)),i&&this.setFrameRate(Math.round(1e3/i)),this.setFrame(this.currentFrame),this.play(),this},gotoAndStop:function(t){return this.stop(),this.setFrame(t),this},prevFrame:function(){return this.setFrame(--this.currentFrame)},nextFrame:function(){return this.setFrame(++this.currentFrame)},play:function(){return this.isPlaying?this:(this._startTime=Date.now(),this._timer.start(),this.isPlaying=!0,this)},stop:function(){return this._timer.stop(),this.isPlaying=!1,this},pause:function(t){return this._timer.pause(t),this._startTime+=t,this.isPlaying=!1,this},wait:function(t){return this._timer.wait(t),this},setFrameRate:function(t){this.frameRate=t},setFrameBySprite:function(t){var i=this.frame.frames[t]||{},n=this.RES.res[i.res];if(n!==e)return this._timer.delay=(i.duration||0)*this.frameRate,this._clip.x=i.x||0,this._clip.y=i.y||0,this._clip.sx=n.x||0,this._clip.sy=n.y||0,this._clip.swidth=n.w||this.width||0,this._clip.sheight=n.h||this.height||0,this._clip.width=this._clip.swidth,this._clip.height=this._clip.sheight,this.width=this._clip.width,this.height=this._clip.height,this},setFrameByPath:function(t){var e=this.frame.frames[t]||{},i=this.RESUrl[t];return this._timer.delay=(e.duration||0)*this.frameRate,this._clip.texture=i.texture,this._clip.x=e.x||0,this._clip.y=e.y||0,this._clip.width=i.width||this._clip.width||0,this._clip.height=i.height||this._clip.height||0,this.width=this._clip.width,this.height=this._clip.height,this},_initEvents:function(){this.on("addToStage",function(){this.addChild(this._clip)},this),this._timer.on("timer",function(){++this.currentFrame>this.totalFrames-1&&(this.currentFrame=this._startFrame,this.dispatch("loopcomplete")),this.setFrame(this.currentFrame)},this),this._timer.on("complete",function(){this.off("enterframe"),this.dispatch("complete")},this)}}),n=function(t){return/_(png|jpg|jpeg|gif|bmp|webp)$/.test(t)?RES.getRes(t):t},s=function(t,i){if("string"==typeof t)return RES.getRes(t);if(Array.isArray(t)){var n=[],s={},o={mc:{},res:{}};return t.forEach(function(t){var e=t.split(" "),i=r();n.push({res:i,x:0,y:0,duration:1}),s[i]={x:-1*e[0],y:-1*e[1]}}),o.mc[i]={frames:n,frameRate:24},o.res=s,o}if("object"==typeof t&&!t.mc){var n=[],s={},o={mc:{},res:{}};for(var h in t){var a=t[h],u=r();n.push({res:u,key:h,x:a.offX,y:a.offY,duration:a.duration===e?1:a.duration}),s[u]={x:a.x,y:a.y,w:a.w,h:a.h}}return n=n.sort(function(t,e){return parseInt(t.key.replace(/^[^\d]+/,""))-parseInt(e.key.replace(/^[^\d]+/,""))}),o.mc[i]={frames:n,frameRate:24},o.res=s,o}return t},r=function(t){var e="",i=0;for(t=t||8;i++<t;)e+=Math.floor(16*Math.random()).toString(16);return e.toUpperCase()};t.provide({MovieClip:i})}(window.EC),function(t){"use strict";function e(){return!0}function i(){return!1}var n=document,s=n.body,r=n.documentElement,o=t.EVENTS,h=t.isTouch,a=function(){this.enableStack=[],this._touchX=0,this._touchY=0,this._offsetX=0,this._offsetY=0,this._bound=null,this._lastStack=[],this._lastObject=null,this._touchTimer=null};a.prototype={attach:function(t){this.stage=t,this.element=t.canvas,this._startTime=0,this._bindEvents()},_bindEvents:function(){this.element.addEventListener(o.START,this._onTouchStart.bind(this),!1),this.element.addEventListener(o.MOVE,this._onTouchMove.bind(this),!1),this.element.addEventListener(o.END,this._onTouchEnd.bind(this),!1),this.element.addEventListener("mouseout",this._onMouseOut.bind(this),!1)},_onTouchStart:function(t){t=h?t.targetTouches[0]:t,this._startTime=Date.now(),this._offsetX=window.pageXOffset||r.scrollLeft||s.scrollLeft||0,this._offsetY=window.pageYOffset||r.scrollTop||s.scrollTop||0,this._bound=this.element.getBoundingClientRect(),this._clearTouchTimer(),this._setTouchXY(t),this.enableStack=this._getTouchEnables(),this._triggerEvent("touchstart",t),this._touchTimer=setTimeout(function(){this._triggerEvent("longtouch",t)}.bind(this),600)},_onTouchMove:function(e){e.preventDefault(),e=h?e.changedTouches[0]:e,this._clearTouchTimer(),t.isTouch||(this._offsetX=this._offsetX||window.pageXOffset||r.scrollLeft||s.scrollLeft||0,this._offsetY=this._offsetY||window.pageYOffset||r.scrollTop||s.scrollTop||0,this._bound=this._bound||this.element.getBoundingClientRect(),this.enableStack=this._getTouchEnables()),this._setTouchXY(e),this._triggerEvent("touchmove",e)},_onTouchEnd:function(t){t=h?t.changedTouches[0]:t,this._clearTouchTimer(),this._setTouchXY(t),this._triggerEvent("touchend",t);var e=Date.now()-this._startTime;e<200&&this._triggerEvent("touch",t),this._resetTouch()},_onMouseOut:function(){this._clearTouchTimer(),this._resetTouch(),this._triggerLastStack()},_clearTouchTimer:function(){this._touchTimer&&clearTimeout(this._touchTimer)},_resetTouch:function(){this._offsetX=0,this._offsetY=0,this._bound=null,this._lastStack=[],this._lastObject=null},_triggerEvent:function(e,i){var n=this,s=this.stage.scaleRatio,r=!t.isTouch&&"touchmove"===e,o=this.enableStack.filter(function(e){return t.isPointInPath({x:n._touchX*s,y:n._touchY*s},e)});if(o.length){var h=t.extend({type:e,stageX:this._touchX*s,stageY:this._touchY*s},this._getOriginalEventProps(i));i=new u(i,h);for(var a,c,l=0;l<o.length&&(c=o[l],!i.isPropagationStopped());l++)a&&c!==a||("Sprite"===c.$type||"Stage"===c.$type?c.dispatch(e,t.extend(i,{target:this._getTouchedTarget(c)||c})):c.dispatch(e,t.extend(i,{target:c})),a=c.parent),r&&this._lastObject!==c&&(this.stage.canvas.style.cursor=c.cursor,c.dispatch("touchenter",t.extend(i,{type:"touchenter",target:c}))),this._lastObject=c;this._lastStack=o}else this._lastObject=null,r&&this._triggerLastStack()},_triggerLastStack:function(){this._lastStack.length?this._lastStack.forEach(function(t){t.dispatch("touchout",{type:"touchout",target:t})}):this.stage.canvas.style.cursor="",this._lastStack=[]},_getTouchedTarget:function(e){function i(t){for(var e=t.getChilds(),s=e.length;s--;)e[s].visible&&("Sprite"===e[s].$type?i(e[s]):n.push(e[s]))}var n=[],s=this,r=this.stage.scaleRatio;return i(e),n.find(function(e){return t.isPointInPath({x:s._touchX*r,y:s._touchY*r},e)})},_getTouchEnables:function(){function t(i){for(var n=i.getChilds(),s=n.length;s--;)n[s].visible&&("Sprite"===n[s].$type&&t(n[s]),n[s].touchEnabled&&e.push(n[s]))}var e=[];return t(this.stage),this.stage.touchEnabled&&e.push(this.stage),e},_getOriginalEventProps:function(t){var e={};return["pageX","pageY","clientX","clientY","screenX","screenY","radiusX","radiusY","rotationAngle"].forEach(function(i){e[i]=t[i]}),e},_setTouchXY:function(t){this._touchX=t.pageX-this._bound.left-this._offsetX,this._touchY=t.pageY-this._bound.top-this._offsetY}};var u=function(n,s){n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?e:i,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget):this.type=n,s&&t.extend(this,s),this.timeStamp=n&&n.timeStamp||Date.now()};u.prototype={constructor:u,isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=e,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=e,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=e,t&&t.stopImmediatePropagation(),this.stopPropagation()}},t.provide({TouchEvent:a})}(window.EC);var Stats=function(){function t(){return window.performance&&performance.now?performance.now():Date.now()}function e(t){return s.appendChild(t.dom),t}function i(t){for(var e=0;e<s.children.length;e++)s.children[e].style.display=e===t?"block":"none";n=t}var n=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(t){t.preventDefault(),i(++n%s.children.length)},!1);var r=t(),o=r,h=0,a=e(new Stats.Panel("FPS","#0ff","#002")),u=e(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new Stats.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:s,addPanel:e,showPanel:i,begin:function(){r=t()},end:function(){h++;var e=t();if(u.update(e-r,200),e>o+1e3&&(a.update(1e3*h/(e-o),100),o=e,h=0,c)){var i=performance.memory;c.update(i.usedJSHeapSize/1048576,i.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:s,setMode:i}};Stats.Panel=function(t,e,i){var n=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),h=80*o,a=48*o,u=3*o,c=2*o,l=3*o,d=15*o,f=74*o,p=30*o,g=document.createElement("canvas");g.width=h,g.height=a,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,h,a),m.fillStyle=e,m.fillText(t,u,c),m.fillRect(l,d,f,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(l,d,f,p),{dom:g,update:function(a,v){n=Math.min(n,a),s=Math.max(s,a),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,h,d),m.fillStyle=e,m.fillText(r(a)+" "+t+" ("+r(n)+"-"+r(s)+")",u,c),m.drawImage(g,l+o,d,f-o,p,l,d,f-o,p),m.fillRect(l+f-o,d,o,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(l+f-o,d,o,r((1-a/v)*p))}}},"object"==typeof module&&(module.exports=Stats);